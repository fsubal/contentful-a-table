{"version":3,"sources":["../node_modules/ie-array-find-polyfill/index.js","../node_modules/morphdom/dist/morphdom-esm.js","../node_modules/a-template/lib/util.js","../node_modules/a-template/lib/index.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/isarray/index.js","../node_modules/buffer/index.js","../node_modules/clone/clone.js","../node_modules/deep-extend/lib/deep-extend.js","../node_modules/custom-event-polyfill/custom-event-polyfill.js","../node_modules/a-table/lib/util.js","../node_modules/a-table/lib/index.js","../node_modules/contentful-ui-extensions-sdk/dist/cf-extension-api.js","index.ts","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["morphAttrs","fromNode","toNode","attrs","attributes","i","attr","attrName","attrNamespaceURI","attrValue","fromValue","length","name","namespaceURI","value","localName","getAttributeNS","setAttributeNS","getAttribute","setAttribute","specified","hasAttributeNS","removeAttributeNS","hasAttribute","removeAttribute","range","NS_XHTML","doc","document","undefined","HAS_TEMPLATE_SUPPORT","createElement","HAS_RANGE_SUPPORT","createRange","createFragmentFromTemplate","str","template","innerHTML","content","childNodes","createFragmentFromRange","selectNode","body","fragment","createContextualFragment","createFragmentFromWrap","toElement","trim","compareNodeNames","fromEl","toEl","fromNodeName","nodeName","toNodeName","actualize","charCodeAt","toUpperCase","createElementNS","moveChildren","curChild","firstChild","nextChild","nextSibling","appendChild","syncBooleanAttrProp","specialElHandlers","OPTION","parentNode","parentName","selected","selectedIndex","INPUT","TEXTAREA","newValue","oldValue","nodeValue","placeholder","SELECT","optgroup","ELEMENT_NODE","DOCUMENT_FRAGMENT_NODE","TEXT_NODE","COMMENT_NODE","noop","defaultGetNodeKey","node","id","morphdomFactory","morphdom","options","toNodeHtml","getNodeKey","onBeforeNodeAdded","onNodeAdded","onBeforeElUpdated","onElUpdated","onBeforeNodeDiscarded","onNodeDiscarded","onBeforeElChildrenUpdated","childrenOnly","fromNodesLookup","keyedRemovalList","addKeyedRemoval","key","push","walkDiscardedChildNodes","skipKeyedNodes","nodeType","removeNode","removeChild","indexTree","handleNodeAdded","el","unmatchedFromEl","replaceChild","morphEl","cleanupFromEl","curFromNodeChild","curFromNodeKey","fromNextSibling","toElKey","isSameNode","morphChildren","curToNodeChild","curToNodeKey","toNextSibling","matchingFromEl","outer","curFromNodeType","isCompatible","insertBefore","onBeforeNodeAddedResult","ownerDocument","specialElHandler","morphedNode","morphedNodeType","toNodeType","len","elToRemove","clone","_instanceof","obj","type","nativeMap","Map","_","nativeSet","Set","nativePromise","Promise","parent","circular","depth","prototype","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","Infinity","_clone","child","proto","resolve","reject","then","err","__isArray","__isRegExp","RegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","isBuffer","allocUnsafe","copy","Error","Object","create","getPrototypeOf","index","indexOf","forEach","keyChild","valueChild","set","entryChild","add","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","enumerable","defineProperty","allPropertyNames","getOwnPropertyNames","propertyName","clonePrototype","c","__objToStr","o","toString","call","re","flags","global","ignoreCase","multiline","module","exports","isSpecificValue","val","cloneSpecificValue","x","alloc","deepCloneArray","arr","item","Array","isArray","deepExtend","safeGetProperty","object","property","arguments","target","args","slice","src","keys","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","window","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","getElementById","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7vDA,IAAImD,KAAK,GAAI,YAAW;AACxB;;AAEA,WAASC,WAAT,CAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAC9B,WAAOA,IAAI,IAAI,IAAR,IAAgBD,GAAG,YAAYC,IAAtC;AACD;;AAED,MAAIC,SAAJ;;AACA,MAAI;AACFA,IAAAA,SAAS,GAAGC,GAAZ;AACD,GAFD,CAEE,OAAMC,CAAN,EAAS;AACT;A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,EAAKT,GAAL,CAAxB;AACA,eAFyE,CAI1E;AACC,OALM,MAKA;AACNc,QAAAA,MAAM,CAAC9H,GAAD,CAAN,GAAcyH,UAAU,CAACQ,GAAD,EAAMjB,GAAN,CAAxB;AACA;AACA;AACD,KApCD;AAqCA,GA3CD;AA6CA,SAAOc,MAAP;AACA,CA9DD;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpCA,IAAA,SAAA,GAAA,eAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;;AACA,IAAA,8BAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;AAEA;;;;;AAGA,MAAM,CAAC,KAAP,GAAe,OAAO,CAAC,GAAvB;;AACA,MAAM,CAAC,OAAP,GAAiB,UAAC,OAAD,EAAgB;AAC/B,EAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACA,SAAO,IAAP;AACD,CAHD;;AAKA,IAAM,MAAM,GAAG;AACb,EAAA,IAAI,EAAE,IADO;AAEb,EAAA,QAAQ,EAAE;AACR,IAAA,MAAM,EAAE,CAAC;AAAE,MAAA,KAAK,EAAE,iBAAT;AAA4B,MAAA,KAAK,EAAE;AAAnC,KAAD;AADA;AAFG,CAAf;;AAOA,IAAA,KAAA;AAAA;AAAA,YAAA;AAGE,WAAA,KAAA,CAA6B,EAA7B,EAA+D,GAA/D,EAAqF;AAAxD,SAAA,EAAA,GAAA,EAAA;AAAkC,SAAA,GAAA,GAAA,GAAA;AAFvD,SAAA,KAAA,GAAQ,IAAI,SAAA,CAAA,OAAJ,CAAW,KAAK,EAAhB,EAAoB,MAApB,CAAR;AAGN,SAAK,KAAL,CAAW,YAAX,GAA0B,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA1B;AACA,SAAK,KAAL,CAAW,aAAX,GAA2B,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA3B;AACA,SAAK,QAAL;AACD;;AAEO,EAAA,KAAA,CAAA,SAAA,CAAA,QAAA,GAAR,YAAA;AACE,QAAI,CAAC,KAAK,GAAV,EAAe;AACb;AACD;;AAED,SAAK,GAAL,CAAS,KAAT,CAAe,QAAf,CAAwB,KAAK,KAAL,CAAW,QAAX,EAAxB;AACD,GANO;;AAOV,SAAA,KAAA;AAhBA,CAAA,EAAA;;AAkBA,8BAAA,CAAA,IAAA,CAAK,UAAA,IAAA,EAAI;AACP,MAAM,GAAG,GAAG,IAAZ;AACA,EAAA,GAAG,CAAC,MAAJ,CAAW,gBAAX;AAEA,MAAM,EAAE,GAAG,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAX;;AACA,MAAI,CAAC,EAAL,EAAS;AACP;AACD;;AAED,MAAM,IAAI,GAAG,iBAAiB,CAAC,GAAD,CAA9B;;AACA,MAAI,IAAJ,EAAU;AACR,IAAA,EAAE,CAAC,SAAH,GAAe,IAAf;AACD;;AAED,MAAI,KAAJ,CAAU,EAAV,EAAc,GAAd;AACD,CAfD;AAiBA,IAAM,eAAe,GAAG,sGAAxB;;AAWA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,GAAD,EAAuB;AAC/C,MAAM,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,QAAV,EAAZ;AACA,MAAM,SAAS,GAAG,IAAI,SAAJ,EAAlB;AACA,MAAM,IAAI,GAAG,SAAS,CAAC,eAAV,CAA0B,GAA1B,EAA+B,WAA/B,CAAb;AACA,MAAM,KAAK,GAAG,IAAI,CAAC,aAAL,CAAmB,OAAnB,CAAd;AAEA,SAAO,KAAK,GAAG,KAAK,CAAC,SAAT,GAAqB,eAAjC;AACD,CAPD;;;ACjEA,IAAIK,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGvB,MAAM,CAACwB,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BH,EAAAA,SAAS,CAAC7B,IAAV,CAAe,IAAf,EAAqBgC,UAArB;AACA,OAAKC,GAAL,GAAW;AACTC,IAAAA,IAAI,EAAE5B,MAAM,CAACwB,MAAP,CAAcK,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsB1I,IAAtB,CAA2B6I,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTC,IAAAA,OAAO,EAAE,UAAUD,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuB3I,IAAvB,CAA4B6I,EAA5B;AACD;AATQ,GAAX;AAYAjC,EAAAA,MAAM,CAACwB,MAAP,CAAcK,OAAd,GAAwB,IAAxB;AACD;;AAED7B,MAAM,CAACwB,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIU,aAAJ,EAAmBC,cAAnB;AAEA,IAAIlG,MAAM,GAAG8D,MAAM,CAACwB,MAAP,CAActF,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACmG,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASC,KAAT,EAAgB;AAC7BT,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIR,IAAI,GAAGiB,IAAI,CAACC,KAAL,CAAWF,KAAK,CAAChB,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAAClG,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIqH,OAAO,GAAG,KAAd;AACAnB,MAAAA,IAAI,CAACoB,MAAL,CAAY3E,OAAZ,CAAoB,UAAS4E,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACvD,MAAM,CAACwD,aAAR,EAAuBJ,KAAK,CAAC/K,EAA7B,CAA9B;;AACA,cAAIiL,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAInB,IAAI,CAACoB,MAAL,CAAYM,KAAZ,CAAkB,UAASL,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACvH,IAAN,KAAe,KAAf,IAAwBuH,KAAK,CAACM,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIT,OAAJ,EAAa;AACXU,QAAAA,OAAO,CAACC,KAAR;AAEA9B,QAAAA,IAAI,CAACoB,MAAL,CAAY3E,OAAZ,CAAoB,UAAU4E,KAAV,EAAiB;AACnCU,UAAAA,QAAQ,CAAC9D,MAAM,CAACwD,aAAR,EAAuBJ,KAAvB,CAAR;AACD,SAFD;AAIAb,QAAAA,cAAc,CAAC/D,OAAf,CAAuB,UAAUuF,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO;AACLE,QAAAA,MAAM,CAACtB,QAAP,CAAgBuB,MAAhB;AACD;AACF;;AAED,QAAInC,IAAI,CAAClG,IAAL,KAAc,QAAlB,EAA4B;AAC1BgH,MAAAA,EAAE,CAACsB,KAAH;;AACAtB,MAAAA,EAAE,CAACuB,OAAH,GAAa,YAAY;AACvBzB,QAAAA,QAAQ,CAACuB,MAAT;AACD,OAFD;AAGD;;AAED,QAAInC,IAAI,CAAClG,IAAL,KAAc,gBAAlB,EAAoC;AAClC+H,MAAAA,OAAO,CAACS,GAAR,CAAY,2BAAZ;AAEAC,MAAAA,kBAAkB;AACnB;;AAED,QAAIvC,IAAI,CAAClG,IAAL,KAAc,OAAlB,EAA2B;AACzB+H,MAAAA,OAAO,CAACW,KAAR,CAAc,kBAAkBxC,IAAI,CAACwC,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8CzC,IAAI,CAACwC,KAAL,CAAWE,KAAvE;AAEAH,MAAAA,kBAAkB;AAElB,UAAII,OAAO,GAAGC,kBAAkB,CAAC5C,IAAD,CAAhC;AACApN,MAAAA,QAAQ,CAACc,IAAT,CAAcqB,WAAd,CAA0B4N,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASJ,kBAAT,GAA8B;AAC5B,MAAII,OAAO,GAAG/P,QAAQ,CAACiQ,cAAT,CAAwBnD,UAAxB,CAAd;;AACA,MAAIiD,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACG,MAAR;AACD;AACF;;AAED,SAASF,kBAAT,CAA4B5C,IAA5B,EAAkC;AAChC,MAAI2C,OAAO,GAAG/P,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAd;AACA4P,EAAAA,OAAO,CAACrM,EAAR,GAAaoJ,UAAb,CAFgC,CAIhC;;AACA,MAAI+C,OAAO,GAAG7P,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIgQ,UAAU,GAAGnQ,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAjB;AACA0P,EAAAA,OAAO,CAACO,SAAR,GAAoBhD,IAAI,CAACwC,KAAL,CAAWC,OAA/B;AACAM,EAAAA,UAAU,CAACC,SAAX,GAAuBhD,IAAI,CAACwC,KAAL,CAAWE,KAAlC;AAEAC,EAAAA,OAAO,CAACtP,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EoP,OAAO,CAACpP,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIY0P,UAAU,CAAC1P,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOsP,OAAP;AAED;;AAED,SAASM,UAAT,CAAoBrD,MAApB,EAA4BtJ,EAA5B,EAAgC;AAC9B,MAAI4M,OAAO,GAAGtD,MAAM,CAACsD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAKhN,EAAR,IAAewI,KAAK,CAACC,OAAN,CAAcuE,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAC3R,MAAJ,GAAa,CAAd,CAAH,KAAwB2E,EAAjE,EAAsE;AACpE6M,QAAAA,OAAO,CAAC3L,IAAR,CAAa4L,CAAb;AACD;AACF;AACF;;AAED,MAAIxD,MAAM,CAACtF,MAAX,EAAmB;AACjB6I,IAAAA,OAAO,GAAGA,OAAO,CAACI,MAAR,CAAeN,UAAU,CAACrD,MAAM,CAACtF,MAAR,EAAgBhE,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO6M,OAAP;AACD;;AAED,SAASpB,QAAT,CAAkBnC,MAAlB,EAA0ByB,KAA1B,EAAiC;AAC/B,MAAI6B,OAAO,GAAGtD,MAAM,CAACsD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC7B,KAAK,CAAC/K,EAAP,CAAP,IAAqB,CAACsJ,MAAM,CAACtF,MAAjC,EAAyC;AACvC,QAAI+F,EAAE,GAAG,IAAImD,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6CnC,KAAK,CAACM,SAAN,CAAgBC,EAA7D,CAAT;AACAP,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC4B,OAAO,CAAC7B,KAAK,CAAC/K,EAAP,CAAtB;AACA4M,IAAAA,OAAO,CAAC7B,KAAK,CAAC/K,EAAP,CAAP,GAAoB,CAAC+J,EAAD,EAAKgB,KAAK,CAACoC,IAAX,CAApB;AACD,GAJD,MAIO,IAAI7D,MAAM,CAACtF,MAAX,EAAmB;AACxByH,IAAAA,QAAQ,CAACnC,MAAM,CAACtF,MAAR,EAAgB+G,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB5B,MAAxB,EAAgCtJ,EAAhC,EAAoC;AAClC,MAAI4M,OAAO,GAAGtD,MAAM,CAACsD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAAC5M,EAAD,CAAR,IAAgBsJ,MAAM,CAACtF,MAA3B,EAAmC;AACjC,WAAOkH,cAAc,CAAC5B,MAAM,CAACtF,MAAR,EAAgBhE,EAAhB,CAArB;AACD;;AAED,MAAIiK,aAAa,CAACjK,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDiK,EAAAA,aAAa,CAACjK,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAIoN,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAarN,EAAb,CAAb;AAEAkK,EAAAA,cAAc,CAAChJ,IAAf,CAAoB,CAACoI,MAAD,EAAStJ,EAAT,CAApB;;AAEA,MAAIoN,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4BvO,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAOsR,UAAU,CAAChF,MAAM,CAACwD,aAAR,EAAuBnL,EAAvB,CAAV,CAAqCsN,IAArC,CAA0C,UAAUtN,EAAV,EAAc;AAC7D,WAAOkL,cAAc,CAACvD,MAAM,CAACwD,aAAR,EAAuBnL,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAAS2L,YAAT,CAAsBrC,MAAtB,EAA8BtJ,EAA9B,EAAkC;AAChC,MAAIoN,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAarN,EAAb,CAAb;AACAsJ,EAAAA,MAAM,CAACK,OAAP,GAAiB,EAAjB;;AACA,MAAIyD,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAAC3D,GAAP,CAAWC,IAAX,GAAkBJ,MAAM,CAACK,OAAzB;AACD;;AAED,MAAIyD,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWI,iBAAX,CAA6BxO,MAAzD,EAAiE;AAC/D+R,IAAAA,MAAM,CAAC3D,GAAP,CAAWI,iBAAX,CAA6B1D,OAA7B,CAAqC,UAAUoH,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACjE,MAAM,CAACK,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOL,MAAM,CAAC+D,KAAP,CAAarN,EAAb,CAAP;AACAsJ,EAAAA,MAAM,CAACtJ,EAAD,CAAN;AAEAoN,EAAAA,MAAM,GAAG9D,MAAM,CAAC+D,KAAP,CAAarN,EAAb,CAAT;;AACA,MAAIoN,MAAM,IAAIA,MAAM,CAAC3D,GAAjB,IAAwB2D,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4BvO,MAAxD,EAAgE;AAC9D+R,IAAAA,MAAM,CAAC3D,GAAP,CAAWG,gBAAX,CAA4BzD,OAA5B,CAAoC,UAAUoH,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["'use strict';\nif (!Array.prototype.find) {\n    Object.defineProperty(Array.prototype, 'find', {\n        value: function (predicate) {\n\n            if (this == null) {\n                throw new TypeError('this is null or not defined');\n            }\n\n            var obj = Object(this);\n            var len = obj.length >>> 0;\n\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n\n            var thisArg = arguments[1];\n\n            var index = 0;\n\n            while (index < len) {\n                var iValue = obj[index];\n                if (predicate.call(thisArg, iValue, index, obj)) {\n                    return iValue;\n                }\n                index++;\n            }\n\n            return undefined;\n        }\n    });\n}","function morphAttrs(fromNode, toNode) {\n    var attrs = toNode.attributes;\n    var i;\n    var attr;\n    var attrName;\n    var attrNamespaceURI;\n    var attrValue;\n    var fromValue;\n\n    // update attributes on original DOM element\n    for (i = attrs.length - 1; i >= 0; --i) {\n        attr = attrs[i];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n        attrValue = attr.value;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n            fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);\n\n            if (fromValue !== attrValue) {\n                fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n            }\n        } else {\n            fromValue = fromNode.getAttribute(attrName);\n\n            if (fromValue !== attrValue) {\n                fromNode.setAttribute(attrName, attrValue);\n            }\n        }\n    }\n\n    // Remove any extra attributes found on the original DOM element that\n    // weren't found on the target element.\n    attrs = fromNode.attributes;\n\n    for (i = attrs.length - 1; i >= 0; --i) {\n        attr = attrs[i];\n        if (attr.specified !== false) {\n            attrName = attr.name;\n            attrNamespaceURI = attr.namespaceURI;\n\n            if (attrNamespaceURI) {\n                attrName = attr.localName || attrName;\n\n                if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n                    fromNode.removeAttributeNS(attrNamespaceURI, attrName);\n                }\n            } else {\n                if (!toNode.hasAttribute(attrName)) {\n                    fromNode.removeAttribute(attrName);\n                }\n            }\n        }\n    }\n}\n\nvar range; // Create a range object for efficently rendering strings to elements.\nvar NS_XHTML = 'http://www.w3.org/1999/xhtml';\n\nvar doc = typeof document === 'undefined' ? undefined : document;\nvar HAS_TEMPLATE_SUPPORT = !!doc && 'content' in doc.createElement('template');\nvar HAS_RANGE_SUPPORT = !!doc && doc.createRange && 'createContextualFragment' in doc.createRange();\n\nfunction createFragmentFromTemplate(str) {\n    var template = doc.createElement('template');\n    template.innerHTML = str;\n    return template.content.childNodes[0];\n}\n\nfunction createFragmentFromRange(str) {\n    if (!range) {\n        range = doc.createRange();\n        range.selectNode(doc.body);\n    }\n\n    var fragment = range.createContextualFragment(str);\n    return fragment.childNodes[0];\n}\n\nfunction createFragmentFromWrap(str) {\n    var fragment = doc.createElement('body');\n    fragment.innerHTML = str;\n    return fragment.childNodes[0];\n}\n\n/**\n * This is about the same\n * var html = new DOMParser().parseFromString(str, 'text/html');\n * return html.body.firstChild;\n *\n * @method toElement\n * @param {String} str\n */\nfunction toElement(str) {\n    str = str.trim();\n    if (HAS_TEMPLATE_SUPPORT) {\n      // avoid restrictions on content for things like `<tr><th>Hi</th></tr>` which\n      // createContextualFragment doesn't support\n      // <template> support not available in IE\n      return createFragmentFromTemplate(str);\n    } else if (HAS_RANGE_SUPPORT) {\n      return createFragmentFromRange(str);\n    }\n\n    return createFragmentFromWrap(str);\n}\n\n/**\n * Returns true if two node's names are the same.\n *\n * NOTE: We don't bother checking `namespaceURI` because you will never find two HTML elements with the same\n *       nodeName and different namespace URIs.\n *\n * @param {Element} a\n * @param {Element} b The target element\n * @return {boolean}\n */\nfunction compareNodeNames(fromEl, toEl) {\n    var fromNodeName = fromEl.nodeName;\n    var toNodeName = toEl.nodeName;\n\n    if (fromNodeName === toNodeName) {\n        return true;\n    }\n\n    if (toEl.actualize &&\n        fromNodeName.charCodeAt(0) < 91 && /* from tag name is upper case */\n        toNodeName.charCodeAt(0) > 90 /* target tag name is lower case */) {\n        // If the target element is a virtual DOM node then we may need to normalize the tag name\n        // before comparing. Normal HTML elements that are in the \"http://www.w3.org/1999/xhtml\"\n        // are converted to upper case\n        return fromNodeName === toNodeName.toUpperCase();\n    } else {\n        return false;\n    }\n}\n\n/**\n * Create an element, optionally with a known namespace URI.\n *\n * @param {string} name the element name, e.g. 'div' or 'svg'\n * @param {string} [namespaceURI] the element's namespace URI, i.e. the value of\n * its `xmlns` attribute or its inferred namespace.\n *\n * @return {Element}\n */\nfunction createElementNS(name, namespaceURI) {\n    return !namespaceURI || namespaceURI === NS_XHTML ?\n        doc.createElement(name) :\n        doc.createElementNS(namespaceURI, name);\n}\n\n/**\n * Copies the children of one DOM element to another DOM element\n */\nfunction moveChildren(fromEl, toEl) {\n    var curChild = fromEl.firstChild;\n    while (curChild) {\n        var nextChild = curChild.nextSibling;\n        toEl.appendChild(curChild);\n        curChild = nextChild;\n    }\n    return toEl;\n}\n\nfunction syncBooleanAttrProp(fromEl, toEl, name) {\n    if (fromEl[name] !== toEl[name]) {\n        fromEl[name] = toEl[name];\n        if (fromEl[name]) {\n            fromEl.setAttribute(name, '');\n        } else {\n            fromEl.removeAttribute(name);\n        }\n    }\n}\n\nvar specialElHandlers = {\n    OPTION: function(fromEl, toEl) {\n        var parentNode = fromEl.parentNode;\n        if (parentNode) {\n            var parentName = parentNode.nodeName.toUpperCase();\n            if (parentName === 'OPTGROUP') {\n                parentNode = parentNode.parentNode;\n                parentName = parentNode && parentNode.nodeName.toUpperCase();\n            }\n            if (parentName === 'SELECT' && !parentNode.hasAttribute('multiple')) {\n                if (fromEl.hasAttribute('selected') && !toEl.selected) {\n                    // Workaround for MS Edge bug where the 'selected' attribute can only be\n                    // removed if set to a non-empty value:\n                    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12087679/\n                    fromEl.setAttribute('selected', 'selected');\n                    fromEl.removeAttribute('selected');\n                }\n                // We have to reset select element's selectedIndex to -1, otherwise setting\n                // fromEl.selected using the syncBooleanAttrProp below has no effect.\n                // The correct selectedIndex will be set in the SELECT special handler below.\n                parentNode.selectedIndex = -1;\n            }\n        }\n        syncBooleanAttrProp(fromEl, toEl, 'selected');\n    },\n    /**\n     * The \"value\" attribute is special for the <input> element since it sets\n     * the initial value. Changing the \"value\" attribute without changing the\n     * \"value\" property will have no effect since it is only used to the set the\n     * initial value.  Similar for the \"checked\" attribute, and \"disabled\".\n     */\n    INPUT: function(fromEl, toEl) {\n        syncBooleanAttrProp(fromEl, toEl, 'checked');\n        syncBooleanAttrProp(fromEl, toEl, 'disabled');\n\n        if (fromEl.value !== toEl.value) {\n            fromEl.value = toEl.value;\n        }\n\n        if (!toEl.hasAttribute('value')) {\n            fromEl.removeAttribute('value');\n        }\n    },\n\n    TEXTAREA: function(fromEl, toEl) {\n        var newValue = toEl.value;\n        if (fromEl.value !== newValue) {\n            fromEl.value = newValue;\n        }\n\n        var firstChild = fromEl.firstChild;\n        if (firstChild) {\n            // Needed for IE. Apparently IE sets the placeholder as the\n            // node value and vise versa. This ignores an empty update.\n            var oldValue = firstChild.nodeValue;\n\n            if (oldValue == newValue || (!newValue && oldValue == fromEl.placeholder)) {\n                return;\n            }\n\n            firstChild.nodeValue = newValue;\n        }\n    },\n    SELECT: function(fromEl, toEl) {\n        if (!toEl.hasAttribute('multiple')) {\n            var selectedIndex = -1;\n            var i = 0;\n            // We have to loop through children of fromEl, not toEl since nodes can be moved\n            // from toEl to fromEl directly when morphing.\n            // At the time this special handler is invoked, all children have already been morphed\n            // and appended to / removed from fromEl, so using fromEl here is safe and correct.\n            var curChild = fromEl.firstChild;\n            var optgroup;\n            var nodeName;\n            while(curChild) {\n                nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();\n                if (nodeName === 'OPTGROUP') {\n                    optgroup = curChild;\n                    curChild = optgroup.firstChild;\n                } else {\n                    if (nodeName === 'OPTION') {\n                        if (curChild.hasAttribute('selected')) {\n                            selectedIndex = i;\n                            break;\n                        }\n                        i++;\n                    }\n                    curChild = curChild.nextSibling;\n                    if (!curChild && optgroup) {\n                        curChild = optgroup.nextSibling;\n                        optgroup = null;\n                    }\n                }\n            }\n\n            fromEl.selectedIndex = selectedIndex;\n        }\n    }\n};\n\nvar ELEMENT_NODE = 1;\nvar DOCUMENT_FRAGMENT_NODE = 11;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\n\nfunction noop() {}\n\nfunction defaultGetNodeKey(node) {\n    return node.id;\n}\n\nfunction morphdomFactory(morphAttrs) {\n\n    return function morphdom(fromNode, toNode, options) {\n        if (!options) {\n            options = {};\n        }\n\n        if (typeof toNode === 'string') {\n            if (fromNode.nodeName === '#document' || fromNode.nodeName === 'HTML') {\n                var toNodeHtml = toNode;\n                toNode = doc.createElement('html');\n                toNode.innerHTML = toNodeHtml;\n            } else {\n                toNode = toElement(toNode);\n            }\n        }\n\n        var getNodeKey = options.getNodeKey || defaultGetNodeKey;\n        var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;\n        var onNodeAdded = options.onNodeAdded || noop;\n        var onBeforeElUpdated = options.onBeforeElUpdated || noop;\n        var onElUpdated = options.onElUpdated || noop;\n        var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;\n        var onNodeDiscarded = options.onNodeDiscarded || noop;\n        var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;\n        var childrenOnly = options.childrenOnly === true;\n\n        // This object is used as a lookup to quickly find all keyed elements in the original DOM tree.\n        var fromNodesLookup = {};\n        var keyedRemovalList;\n\n        function addKeyedRemoval(key) {\n            if (keyedRemovalList) {\n                keyedRemovalList.push(key);\n            } else {\n                keyedRemovalList = [key];\n            }\n        }\n\n        function walkDiscardedChildNodes(node, skipKeyedNodes) {\n            if (node.nodeType === ELEMENT_NODE) {\n                var curChild = node.firstChild;\n                while (curChild) {\n\n                    var key = undefined;\n\n                    if (skipKeyedNodes && (key = getNodeKey(curChild))) {\n                        // If we are skipping keyed nodes then we add the key\n                        // to a list so that it can be handled at the very end.\n                        addKeyedRemoval(key);\n                    } else {\n                        // Only report the node as discarded if it is not keyed. We do this because\n                        // at the end we loop through all keyed elements that were unmatched\n                        // and then discard them in one final pass.\n                        onNodeDiscarded(curChild);\n                        if (curChild.firstChild) {\n                            walkDiscardedChildNodes(curChild, skipKeyedNodes);\n                        }\n                    }\n\n                    curChild = curChild.nextSibling;\n                }\n            }\n        }\n\n        /**\n         * Removes a DOM node out of the original DOM\n         *\n         * @param  {Node} node The node to remove\n         * @param  {Node} parentNode The nodes parent\n         * @param  {Boolean} skipKeyedNodes If true then elements with keys will be skipped and not discarded.\n         * @return {undefined}\n         */\n        function removeNode(node, parentNode, skipKeyedNodes) {\n            if (onBeforeNodeDiscarded(node) === false) {\n                return;\n            }\n\n            if (parentNode) {\n                parentNode.removeChild(node);\n            }\n\n            onNodeDiscarded(node);\n            walkDiscardedChildNodes(node, skipKeyedNodes);\n        }\n\n        // // TreeWalker implementation is no faster, but keeping this around in case this changes in the future\n        // function indexTree(root) {\n        //     var treeWalker = document.createTreeWalker(\n        //         root,\n        //         NodeFilter.SHOW_ELEMENT);\n        //\n        //     var el;\n        //     while((el = treeWalker.nextNode())) {\n        //         var key = getNodeKey(el);\n        //         if (key) {\n        //             fromNodesLookup[key] = el;\n        //         }\n        //     }\n        // }\n\n        // // NodeIterator implementation is no faster, but keeping this around in case this changes in the future\n        //\n        // function indexTree(node) {\n        //     var nodeIterator = document.createNodeIterator(node, NodeFilter.SHOW_ELEMENT);\n        //     var el;\n        //     while((el = nodeIterator.nextNode())) {\n        //         var key = getNodeKey(el);\n        //         if (key) {\n        //             fromNodesLookup[key] = el;\n        //         }\n        //     }\n        // }\n\n        function indexTree(node) {\n            if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE) {\n                var curChild = node.firstChild;\n                while (curChild) {\n                    var key = getNodeKey(curChild);\n                    if (key) {\n                        fromNodesLookup[key] = curChild;\n                    }\n\n                    // Walk recursively\n                    indexTree(curChild);\n\n                    curChild = curChild.nextSibling;\n                }\n            }\n        }\n\n        indexTree(fromNode);\n\n        function handleNodeAdded(el) {\n            onNodeAdded(el);\n\n            var curChild = el.firstChild;\n            while (curChild) {\n                var nextSibling = curChild.nextSibling;\n\n                var key = getNodeKey(curChild);\n                if (key) {\n                    var unmatchedFromEl = fromNodesLookup[key];\n                    if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {\n                        curChild.parentNode.replaceChild(unmatchedFromEl, curChild);\n                        morphEl(unmatchedFromEl, curChild);\n                    }\n                }\n\n                handleNodeAdded(curChild);\n                curChild = nextSibling;\n            }\n        }\n\n        function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {\n            // We have processed all of the \"to nodes\". If curFromNodeChild is\n            // non-null then we still have some from nodes left over that need\n            // to be removed\n            while (curFromNodeChild) {\n                var fromNextSibling = curFromNodeChild.nextSibling;\n                if ((curFromNodeKey = getNodeKey(curFromNodeChild))) {\n                    // Since the node is keyed it might be matched up later so we defer\n                    // the actual removal to later\n                    addKeyedRemoval(curFromNodeKey);\n                } else {\n                    // NOTE: we skip nested keyed nodes from being removed since there is\n                    //       still a chance they will be matched up later\n                    removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                }\n                curFromNodeChild = fromNextSibling;\n            }\n        }\n\n        function morphEl(fromEl, toEl, childrenOnly) {\n            var toElKey = getNodeKey(toEl);\n\n            if (toElKey) {\n                // If an element with an ID is being morphed then it will be in the final\n                // DOM so clear it out of the saved elements collection\n                delete fromNodesLookup[toElKey];\n            }\n\n            if (toNode.isSameNode && toNode.isSameNode(fromNode)) {\n                return;\n            }\n\n            if (!childrenOnly) {\n                // optional\n                if (onBeforeElUpdated(fromEl, toEl) === false) {\n                    return;\n                }\n\n                // update attributes on original DOM element first\n                morphAttrs(fromEl, toEl);\n                // optional\n                onElUpdated(fromEl);\n\n                if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {\n                    return;\n                }\n            }\n            if (fromEl.nodeName !== 'TEXTAREA') {\n              morphChildren(fromEl, toEl);\n            } else {\n              specialElHandlers.TEXTAREA(fromEl, toEl);\n            }\n        }\n\n        function morphChildren(fromEl, toEl) {\n            var curToNodeChild = toEl.firstChild;\n            var curFromNodeChild = fromEl.firstChild;\n            var curToNodeKey;\n            var curFromNodeKey;\n\n            var fromNextSibling;\n            var toNextSibling;\n            var matchingFromEl;\n\n            // walk the children\n            outer: while (curToNodeChild) {\n                toNextSibling = curToNodeChild.nextSibling;\n                curToNodeKey = getNodeKey(curToNodeChild);\n\n                // walk the fromNode children all the way through\n                while (curFromNodeChild) {\n                    fromNextSibling = curFromNodeChild.nextSibling;\n\n                    if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {\n                        curToNodeChild = toNextSibling;\n                        curFromNodeChild = fromNextSibling;\n                        continue outer;\n                    }\n\n                    curFromNodeKey = getNodeKey(curFromNodeChild);\n\n                    var curFromNodeType = curFromNodeChild.nodeType;\n\n                    // this means if the curFromNodeChild doesnt have a match with the curToNodeChild\n                    var isCompatible = undefined;\n\n                    if (curFromNodeType === curToNodeChild.nodeType) {\n                        if (curFromNodeType === ELEMENT_NODE) {\n                            // Both nodes being compared are Element nodes\n\n                            if (curToNodeKey) {\n                                // The target node has a key so we want to match it up with the correct element\n                                // in the original DOM tree\n                                if (curToNodeKey !== curFromNodeKey) {\n                                    // The current element in the original DOM tree does not have a matching key so\n                                    // let's check our lookup to see if there is a matching element in the original\n                                    // DOM tree\n                                    if ((matchingFromEl = fromNodesLookup[curToNodeKey])) {\n                                        if (fromNextSibling === matchingFromEl) {\n                                            // Special case for single element removals. To avoid removing the original\n                                            // DOM node out of the tree (since that can break CSS transitions, etc.),\n                                            // we will instead discard the current node and wait until the next\n                                            // iteration to properly match up the keyed target element with its matching\n                                            // element in the original tree\n                                            isCompatible = false;\n                                        } else {\n                                            // We found a matching keyed element somewhere in the original DOM tree.\n                                            // Let's move the original DOM node into the current position and morph\n                                            // it.\n\n                                            // NOTE: We use insertBefore instead of replaceChild because we want to go through\n                                            // the `removeNode()` function for the node that is being discarded so that\n                                            // all lifecycle hooks are correctly invoked\n                                            fromEl.insertBefore(matchingFromEl, curFromNodeChild);\n\n                                            // fromNextSibling = curFromNodeChild.nextSibling;\n\n                                            if (curFromNodeKey) {\n                                                // Since the node is keyed it might be matched up later so we defer\n                                                // the actual removal to later\n                                                addKeyedRemoval(curFromNodeKey);\n                                            } else {\n                                                // NOTE: we skip nested keyed nodes from being removed since there is\n                                                //       still a chance they will be matched up later\n                                                removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                                            }\n\n                                            curFromNodeChild = matchingFromEl;\n                                        }\n                                    } else {\n                                        // The nodes are not compatible since the \"to\" node has a key and there\n                                        // is no matching keyed node in the source tree\n                                        isCompatible = false;\n                                    }\n                                }\n                            } else if (curFromNodeKey) {\n                                // The original has a key\n                                isCompatible = false;\n                            }\n\n                            isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);\n                            if (isCompatible) {\n                                // We found compatible DOM elements so transform\n                                // the current \"from\" node to match the current\n                                // target DOM node.\n                                // MORPH\n                                morphEl(curFromNodeChild, curToNodeChild);\n                            }\n\n                        } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {\n                            // Both nodes being compared are Text or Comment nodes\n                            isCompatible = true;\n                            // Simply update nodeValue on the original node to\n                            // change the text value\n                            if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {\n                                curFromNodeChild.nodeValue = curToNodeChild.nodeValue;\n                            }\n\n                        }\n                    }\n\n                    if (isCompatible) {\n                        // Advance both the \"to\" child and the \"from\" child since we found a match\n                        // Nothing else to do as we already recursively called morphChildren above\n                        curToNodeChild = toNextSibling;\n                        curFromNodeChild = fromNextSibling;\n                        continue outer;\n                    }\n\n                    // No compatible match so remove the old node from the DOM and continue trying to find a\n                    // match in the original DOM. However, we only do this if the from node is not keyed\n                    // since it is possible that a keyed node might match up with a node somewhere else in the\n                    // target tree and we don't want to discard it just yet since it still might find a\n                    // home in the final DOM tree. After everything is done we will remove any keyed nodes\n                    // that didn't find a home\n                    if (curFromNodeKey) {\n                        // Since the node is keyed it might be matched up later so we defer\n                        // the actual removal to later\n                        addKeyedRemoval(curFromNodeKey);\n                    } else {\n                        // NOTE: we skip nested keyed nodes from being removed since there is\n                        //       still a chance they will be matched up later\n                        removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                    }\n\n                    curFromNodeChild = fromNextSibling;\n                } // END: while(curFromNodeChild) {}\n\n                // If we got this far then we did not find a candidate match for\n                // our \"to node\" and we exhausted all of the children \"from\"\n                // nodes. Therefore, we will just append the current \"to\" node\n                // to the end\n                if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {\n                    fromEl.appendChild(matchingFromEl);\n                    // MORPH\n                    morphEl(matchingFromEl, curToNodeChild);\n                } else {\n                    var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);\n                    if (onBeforeNodeAddedResult !== false) {\n                        if (onBeforeNodeAddedResult) {\n                            curToNodeChild = onBeforeNodeAddedResult;\n                        }\n\n                        if (curToNodeChild.actualize) {\n                            curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);\n                        }\n                        fromEl.appendChild(curToNodeChild);\n                        handleNodeAdded(curToNodeChild);\n                    }\n                }\n\n                curToNodeChild = toNextSibling;\n                curFromNodeChild = fromNextSibling;\n            }\n\n            cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);\n\n            var specialElHandler = specialElHandlers[fromEl.nodeName];\n            if (specialElHandler) {\n                specialElHandler(fromEl, toEl);\n            }\n        } // END: morphChildren(...)\n\n        var morphedNode = fromNode;\n        var morphedNodeType = morphedNode.nodeType;\n        var toNodeType = toNode.nodeType;\n\n        if (!childrenOnly) {\n            // Handle the case where we are given two DOM nodes that are not\n            // compatible (e.g. <div> --> <span> or <div> --> TEXT)\n            if (morphedNodeType === ELEMENT_NODE) {\n                if (toNodeType === ELEMENT_NODE) {\n                    if (!compareNodeNames(fromNode, toNode)) {\n                        onNodeDiscarded(fromNode);\n                        morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));\n                    }\n                } else {\n                    // Going from an element node to a text node\n                    morphedNode = toNode;\n                }\n            } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) { // Text or comment node\n                if (toNodeType === morphedNodeType) {\n                    if (morphedNode.nodeValue !== toNode.nodeValue) {\n                        morphedNode.nodeValue = toNode.nodeValue;\n                    }\n\n                    return morphedNode;\n                } else {\n                    // Text node to something else\n                    morphedNode = toNode;\n                }\n            }\n        }\n\n        if (morphedNode === toNode) {\n            // The \"to node\" was not compatible with the \"from node\" so we had to\n            // toss out the \"from node\" and use the \"to node\"\n            onNodeDiscarded(fromNode);\n        } else {\n            morphEl(morphedNode, toNode, childrenOnly);\n\n            // We now need to loop over any keyed nodes that might need to be\n            // removed. We only do the removal if we know that the keyed node\n            // never found a match. When a keyed node is matched up we remove\n            // it out of fromNodesLookup and we use fromNodesLookup to determine\n            // if a keyed node has been matched up or not\n            if (keyedRemovalList) {\n                for (var i=0, len=keyedRemovalList.length; i<len; i++) {\n                    var elToRemove = fromNodesLookup[keyedRemovalList[i]];\n                    if (elToRemove) {\n                        removeNode(elToRemove, elToRemove.parentNode, false);\n                    }\n                }\n            }\n        }\n\n        if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {\n            if (morphedNode.actualize) {\n                morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);\n            }\n            // If we had to swap out the from node with a new node because the old\n            // node was not compatible with the target node then we need to\n            // replace the old DOM node in the original DOM tree. This is only\n            // possible if the original DOM node was part of a DOM tree which\n            // we know is the case if it has a parent node.\n            fromNode.parentNode.replaceChild(morphedNode, fromNode);\n        }\n\n        return morphedNode;\n    };\n}\n\nvar morphdom = morphdomFactory(morphAttrs);\n\nexport default morphdom;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar matches = exports.matches = function matches(element, query) {\n  var matches = (element.document || element.ownerDocument).querySelectorAll(query);\n  var i = matches.length;\n  while (--i >= 0 && matches.item(i) !== element) {}\n  return i > -1;\n};\n\nvar selector = exports.selector = function selector(_selector) {\n  return document.querySelector(_selector);\n};\n\nvar findAncestor = exports.findAncestor = function findAncestor(element, selector) {\n  if (typeof element.closest === 'function') {\n    return element.closest(selector) || null;\n  }\n  while (element && element !== document) {\n    if (matches(element, selector)) {\n      return element;\n    }\n    element = element.parentElement;\n  }\n  return null;\n};\n\nvar on = exports.on = function on(element, query, eventNames, fn) {\n  var events = eventNames.split(' ');\n  events.forEach(function (event) {\n    element.addEventListener(event, function (e) {\n      var target = e.target;\n      var delegateTarget = findAncestor(e.target, query);\n      if (delegateTarget) {\n        e.delegateTarget = delegateTarget;\n        fn(e);\n      }\n    });\n  });\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nrequire('ie-array-find-polyfill');\n\nvar _morphdom = require('morphdom');\n\nvar _morphdom2 = _interopRequireDefault(_morphdom);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar eventType = 'input paste copy click change keydown keyup keypress contextmenu mouseup mousedown mousemove touchstart touchend touchmove compositionstart compositionend focus';\nvar bindType = 'input change click';\nvar dataAction = eventType.replace(/([a-z]+)/g, '[data-action-$1],') + '[data-action]';\n\nvar aTemplate = function () {\n  function aTemplate(opt) {\n    var _this = this;\n\n    _classCallCheck(this, aTemplate);\n\n    this.atemplate = [];\n    if (opt) {\n      Object.keys(opt).forEach(function (key) {\n        _this[key] = opt[key];\n      });\n    }\n    if (!this.data) {\n      this.data = {};\n    }\n    if (!this.templates) {\n      this.templates = [];\n    }\n    var templates = this.templates;\n    var length = templates.length;\n    for (var i = 0, n = length; i < n; i += 1) {\n      var template = this.templates[i];\n      var html = (0, _util.selector)('#' + template).innerHTML;\n      this.atemplate.push({ id: template, html: html, binded: false });\n    }\n  }\n\n  _createClass(aTemplate, [{\n    key: 'addDataBind',\n    value: function addDataBind(ele) {\n      var _this2 = this;\n\n      (0, _util.on)(ele, '[data-bind]', bindType, function (e) {\n        var target = e.delegateTarget;\n        var data = target.getAttribute('data-bind');\n        var attr = target.getAttribute('href');\n        var value = target.value;\n        if (attr) {\n          value = value.replace('#', '');\n        }\n        if (target.getAttribute('type') === 'checkbox') {\n          (function () {\n            var arr = [];\n            var items = document.querySelectorAll('[data-bind=\"' + data + '\"]');\n            [].forEach.call(items, function (item) {\n              if (item.checked) {\n                arr.push(item.value);\n              }\n            });\n          })();\n        } else if (target.getAttribute('type') !== 'radio') {\n          _this2.updateDataByString(data, value);\n        }\n      });\n    }\n  }, {\n    key: 'addActionBind',\n    value: function addActionBind(ele) {\n      var _this3 = this;\n\n      (0, _util.on)(ele, dataAction, eventType, function (e) {\n        var target = e.delegateTarget;\n        var events = eventType.split(' ');\n        var action = 'action';\n        events.forEach(function (event) {\n          if (target.getAttribute('data-action-' + event)) {\n            if (e.type === event) {\n              action += '-' + event;\n            }\n          }\n        });\n        var string = target.getAttribute('data-' + action);\n        if (!string) {\n          return;\n        }\n        var method = string.replace(/\\(.*?\\);?/, '');\n        var parameter = string.replace(/(.*?)\\((.*?)\\);?/, '$2');\n        var pts = parameter.split(','); // \n        _this3.e = e;\n        if (_this3.method && _this3.method[method]) {\n          var _method;\n\n          (_method = _this3.method)[method].apply(_method, _toConsumableArray(pts));\n        } else if (_this3[method]) {\n          _this3[method].apply(_this3, _toConsumableArray(pts));\n        }\n      });\n    }\n  }, {\n    key: 'addTemplate',\n    value: function addTemplate(id, html) {\n      this.atemplate.push({ id: id, html: html, binded: false });\n      this.templates.push(id);\n    }\n\n    // loadHtml() {\n    //   const templates = this.templates;\n    //   const promises = [];\n    //   templates.forEach((template) => {\n    //     const d = new $.Deferred();\n    //     promises.push(d);\n    //     const src = selector(`#${template}`).getAttribute('src');\n    //     $.ajax({\n    //       url: src,\n    //       type: 'GET',\n    //       dataType: 'text'\n    //     }).success((data) => {\n    //       selector(`#${template}`).innerHTML = data;\n    //       d.resolve();\n    //     });\n    //   });\n    //   return $.when(...promises);\n    // }\n\n  }, {\n    key: 'getData',\n    value: function getData() {\n      return JSON.parse(JSON.stringify(this.data));\n    }\n  }, {\n    key: 'saveData',\n    value: function saveData(key) {\n      var data = JSON.stringify(this.data);\n      localStorage.setItem(key, data);\n    }\n  }, {\n    key: 'setData',\n    value: function setData(opt) {\n      var _this4 = this;\n\n      Object.keys(opt).forEach(function (key) {\n        if (typeof opt[key] !== 'function') {\n          _this4.data[key] = opt[key];\n        }\n      });\n    }\n  }, {\n    key: 'loadData',\n    value: function loadData(key) {\n      var data = JSON.parse(localStorage.getItem(key));\n      if (data) {\n        this.setData(data);\n      }\n    }\n  }, {\n    key: 'getRand',\n    value: function getRand(a, b) {\n      return ~~(Math.random() * (b - a + 1)) + a;\n    }\n  }, {\n    key: 'getRandText',\n    value: function getRandText(limit) {\n      var ret = '';\n      var strings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      var length = strings.length;\n      for (var i = 0; i < limit; i += 1) {\n        ret += strings.charAt(Math.floor(this.getRand(0, length)));\n      }\n      return ret;\n    }\n  }, {\n    key: 'getDataFromObj',\n    value: function getDataFromObj(s, o) {\n      s = s.replace(/\\[([\\w\\-\\.---]+)\\]/g, '.$1'); // convert indexes to properties\n      s = s.replace(/^\\./, ''); // strip leading dot\n      var a = s.split('.');\n      while (a.length) {\n        var n = a.shift();\n        if (n in o) {\n          o = o[n];\n        } else {\n          return null;\n        }\n      }\n      return o;\n    }\n  }, {\n    key: 'getDataByString',\n    value: function getDataByString(s) {\n      var o = this.data;\n      return this.getDataFromObj(s, o);\n    }\n  }, {\n    key: 'updateDataByString',\n    value: function updateDataByString(path, newValue) {\n      var object = this.data;\n      var stack = path.split('.');\n      while (stack.length > 1) {\n        object = object[stack.shift()];\n      }\n      object[stack.shift()] = newValue;\n    }\n  }, {\n    key: 'removeDataByString',\n    value: function removeDataByString(path) {\n      var object = this.data;\n      var stack = path.split('.');\n      while (stack.length > 1) {\n        object = object[stack.shift()];\n      }\n      var shift = stack.shift();\n      if (shift.match(/^\\d+$/)) {\n        object.splice(Number(shift), 1);\n      } else {\n        delete object[shift];\n      }\n    }\n  }, {\n    key: 'resolveBlock',\n    value: function resolveBlock(html, item, i) {\n      var that = this;\n      var touchs = html.match(/<!-- BEGIN ([\\w\\-\\.---]+):touch#([\\w\\-\\.---]+) -->/g);\n      var touchnots = html.match(/<!-- BEGIN ([\\w\\-\\.---]+):touchnot#([\\w\\-\\.---]+) -->/g);\n      var exists = html.match(/<!-- BEGIN ([\\w\\-\\.---]+):exist -->/g);\n      var empties = html.match(/<!-- BEGIN ([\\w\\-\\.---]+):empty -->/g);\n      /* */\n      if (touchs) {\n        for (var k = 0, n = touchs.length; k < n; k += 1) {\n          var start = touchs[k];\n          start = start.replace(/([\\w\\-\\.---]+):touch#([\\w\\-\\.---]+)/, '($1):touch#($2)');\n          var end = start.replace(/BEGIN/, 'END');\n          var reg = new RegExp(start + '(([\\\\n\\\\r\\\\t]|.)*?)' + end, 'g');\n          html = html.replace(reg, function (m, key2, val, next) {\n            var itemkey = typeof item[key2] === 'function' ? item[key2].apply(that) : that.getDataFromObj(key2, item);\n            if ('' + itemkey === val) {\n              return next;\n            }\n            return '';\n          });\n        }\n      }\n      /* */\n      if (touchnots) {\n        for (var _k = 0, _n = touchnots.length; _k < _n; _k += 1) {\n          var _start = touchnots[_k];\n          _start = _start.replace(/([\\w\\-\\.---]+):touchnot#([\\w\\-\\.---]+)/, '($1):touchnot#($2)');\n          var _end = _start.replace(/BEGIN/, 'END');\n          var _reg = new RegExp(_start + '(([\\\\n\\\\r\\\\t]|.)*?)' + _end, 'g');\n          html = html.replace(_reg, function (m, key2, val, next) {\n            var itemkey = typeof item[key2] === 'function' ? item[key2].apply(that) : that.getDataFromObj(key2, item);\n            if ('' + itemkey !== val) {\n              return next;\n            }\n            return '';\n          });\n        }\n      }\n      /* exist*/\n      if (exists) {\n        for (var _k2 = 0, _n2 = exists.length; _k2 < _n2; _k2 += 1) {\n          var _start2 = exists[_k2];\n          _start2 = _start2.replace(/([\\w\\-\\.---]+):exist/, '($1):exist');\n          var _end2 = _start2.replace(/BEGIN/, 'END');\n          var _reg2 = new RegExp(_start2 + '(([\\\\n\\\\r\\\\t]|.)*?)' + _end2, 'g');\n          html = html.replace(_reg2, function (m, key2, next) {\n            var itemkey = typeof item[key2] === 'function' ? item[key2].apply(that) : that.getDataFromObj(key2, item);\n            if (itemkey || itemkey === 0) {\n              return next;\n            }\n            return '';\n          });\n        }\n      }\n      /* empty*/\n      if (empties) {\n        for (var _k3 = 0, _n3 = empties.length; _k3 < _n3; _k3 += 1) {\n          var _start3 = empties[_k3];\n          _start3 = _start3.replace(/([\\w\\-\\.---]+):empty/, '($1):empty');\n          var _end3 = _start3.replace(/BEGIN/, 'END');\n          var empty = new RegExp(_start3 + '(([\\\\n\\\\r\\\\t]|.)*?)' + _end3, 'g');\n          html = html.replace(empty, function (m, key2, next) {\n            var itemkey = typeof item[key2] === 'function' ? item[key2].apply(that) : that.getDataFromObj(key2, item);\n            if (!itemkey && itemkey !== 0) {\n              return next;\n            }\n            return '';\n          });\n        }\n      }\n      /* */\n      html = html.replace(/{([\\w\\-\\.---]+)}(\\[([\\w\\-\\.---]+)\\])*/g, function (n, key3, key4, converter) {\n        var data = void 0;\n        if ('' + key3 === 'i') {\n          data = i;\n        } else if (item[key3] || item[key3] === 0) {\n          if (typeof item[key3] === 'function') {\n            data = item[key3].apply(that);\n          } else {\n            data = item[key3];\n          }\n        } else {\n          if (converter && that.convert && that.convert[converter]) {\n            return that.convert[converter].call(that, '');\n          }\n          return '';\n        }\n        if (converter && that.convert && that.convert[converter]) {\n          return that.convert[converter].call(that, data);\n        }\n        return data;\n      });\n      return html;\n    }\n    /* */\n\n  }, {\n    key: 'resolveAbsBlock',\n    value: function resolveAbsBlock(html) {\n      var that = this;\n      html = html.replace(/{(.*?)}/g, function (n, key3) {\n        var data = that.getDataByString(key3);\n        if (typeof data !== 'undefined') {\n          if (typeof data === 'function') {\n            return data.apply(that);\n          }\n          return data;\n        }\n        return n;\n      });\n      return html;\n    }\n  }, {\n    key: 'resolveInclude',\n    value: function resolveInclude(html) {\n      var include = /<!-- #include id=\"(.*?)\" -->/g;\n      html = html.replace(include, function (m, key) {\n        return (0, _util.selector)('#' + key).innerHTML;\n      });\n      return html;\n    }\n  }, {\n    key: 'resolveWith',\n    value: function resolveWith(html) {\n      var width = /<!-- BEGIN ([\\w\\-\\.---]+):with -->(([\\n\\r\\t]|.)*?)<!-- END ([\\w\\-\\.---]+):with -->/g;\n      html = html.replace(width, function (m, key) {\n        m = m.replace(/data\\-bind=['\"](.*?)['\"]/g, 'data-bind=\\'' + key + '.$1\\'');\n        return m;\n      });\n      return html;\n    }\n  }, {\n    key: 'resolveLoop',\n    value: function resolveLoop(html) {\n      var loop = /<!-- BEGIN ([\\w\\-\\.---]+?):loop -->(([\\n\\r\\t]|.)*?)<!-- END ([\\w\\-\\.---]+?):loop -->/g;\n      var that = this;\n      /* */\n      html = html.replace(loop, function (m, key, val) {\n        var keyItem = that.getDataByString(key);\n        var keys = [];\n        if (typeof keyItem === 'function') {\n          keys = keyItem.apply(that);\n        } else {\n          keys = keyItem;\n        }\n        var ret = '';\n        if (keys instanceof Array) {\n          for (var i = 0, n = keys.length; i < n; i += 1) {\n            ret += that.resolveBlock(val, keys[i], i);\n          }\n        }\n        /* */\n        ret = ret.replace(/\\\\([^\\\\])/g, '$1');\n        return ret;\n      });\n      return html;\n    }\n  }, {\n    key: 'removeData',\n    value: function removeData(arr) {\n      var data = this.data;\n      Object.keys(data).forEach(function (i) {\n        for (var t = 0, n = arr.length; t < n; t += 1) {\n          if (i === arr[t]) {\n            delete data[i];\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: 'hasLoop',\n    value: function hasLoop(txt) {\n      var loop = /<!-- BEGIN ([\\w\\-\\.---]+?):loop -->(([\\n\\r\\t]|.)*?)<!-- END ([\\w\\-\\.---]+?):loop -->/g;\n      if (txt.match(loop)) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'getHtml',\n    value: function getHtml(query, row) {\n      var template = this.atemplate.find(function (item) {\n        return item.id === query;\n      });\n      var html = '';\n      if (template && template.html) {\n        html = template.html;\n      }\n      if (row) {\n        html = query;\n      }\n      if (!html) {\n        return '';\n      }\n      var data = this.data;\n      /* */\n      html = this.resolveInclude(html);\n      /* with*/\n      html = this.resolveWith(html);\n      /* */\n      while (this.hasLoop(html)) {\n        html = this.resolveLoop(html);\n      }\n      /* */\n      html = this.resolveBlock(html, data);\n      /* */\n      html = html.replace(/\\\\([^\\\\])/g, '$1');\n      /* */\n      html = this.resolveAbsBlock(html);\n      /* */\n      return html.replace(/^([\\t ])*\\n/gm, '');\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this5 = this;\n\n      var renderWay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'html';\n      var part = arguments[1];\n\n      var templates = this.templates;\n      if (this.beforeUpdated) {\n        this.beforeUpdated();\n      }\n\n      var _loop = function _loop(i, n) {\n        var tem = templates[i];\n        var query = '#' + tem;\n        var html = _this5.getHtml(tem);\n        var target = (0, _util.selector)('[data-id=\\'' + tem + '\\']');\n        if (!target) {\n          (0, _util.selector)(query).insertAdjacentHTML('afterend', '<div data-id=\"' + tem + '\"></div>');\n          if (renderWay === 'text') {\n            (0, _util.selector)('[data-id=\\'' + tem + '\\']').innerText = html;\n          } else {\n            (0, _util.selector)('[data-id=\\'' + tem + '\\']').innerHTML = html;\n          }\n        } else if (renderWay === 'text') {\n          target.innerText = html;\n        } else if (part) {\n          var doc = document.createElement('div');\n          doc.innerHTML = html;\n          var partHtml = doc.querySelector(part).outerHTML;\n          (0, _morphdom2.default)(target.querySelector(part), partHtml);\n        } else {\n          (0, _morphdom2.default)(target, '<div data-id=\\'' + tem + '\\'>' + html + '</div>');\n        }\n        var template = _this5.atemplate.find(function (item) {\n          return item.id === tem;\n        });\n        if (!template.binded) {\n          template.binded = true;\n          _this5.addDataBind((0, _util.selector)('[data-id=\\'' + tem + '\\']'));\n          _this5.addActionBind((0, _util.selector)('[data-id=\\'' + tem + '\\']'));\n        }\n      };\n\n      for (var i = 0, n = templates.length; i < n; i += 1) {\n        _loop(i, n);\n      }\n      this.updateBindingData(part);\n      if (this.onUpdated) {\n        this.onUpdated(part);\n      }\n      return this;\n    }\n  }, {\n    key: 'updateBindingData',\n    value: function updateBindingData(part) {\n      var _this6 = this;\n\n      var templates = this.templates;\n      for (var i = 0, n = templates.length; i < n; i += 1) {\n        var temp = templates[i];\n        var _template = (0, _util.selector)('[data-id=\\'' + temp + '\\']');\n        if (part) {\n          _template = _template.querySelector(part);\n        }\n        var binds = _template.querySelectorAll('[data-bind]');\n        [].forEach.call(binds, function (item) {\n          var data = _this6.getDataByString(item.getAttribute('data-bind'));\n          if (item.getAttribute('type') === 'checkbox' || item.getAttribute('type') === 'radio') {\n            if (data === item.value) {\n              item.checked = true;\n            }\n          } else {\n            // if(item !== document.activeElement) {\n            item.value = data;\n            // }\n          }\n        });\n        var onewaybinds = _template.querySelectorAll('[data-bind-oneway]');\n        [].forEach.call(onewaybinds, function (item) {\n          var data = _this6.getDataByString(item.getAttribute('data-bind-oneway'));\n          if (item.getAttribute('type') === 'checkbox' || item.getAttribute('type') === 'radio') {\n            if (data === item.value) {\n              item.checked = true;\n            }\n          } else {\n            // if(item !== document.activeElement) {\n            item.value = data;\n            // }\n          }\n        });\n      }\n      return this;\n    }\n  }, {\n    key: 'applyMethod',\n    value: function applyMethod(method) {\n      var _method2;\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return (_method2 = this.method)[method].apply(_method2, args);\n    }\n  }, {\n    key: 'getComputedProp',\n    value: function getComputedProp(prop) {\n      return this.data[prop].apply(this);\n    }\n  }, {\n    key: 'remove',\n    value: function remove(path) {\n      var object = this.data;\n      var stack = path.split('.');\n      while (stack.length > 1) {\n        object = object[stack.shift()];\n      }\n      var shift = stack.shift();\n      if (shift.match(/^\\d+$/)) {\n        object.splice(Number(shift), 1);\n      } else {\n        delete object[shift];\n      }\n      return this;\n    }\n  }]);\n\n  return aTemplate;\n}();\n\nexports.default = aTemplate;\nmodule.exports = exports['default'];","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","/*!\n * @description Recursive object extending\n * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>\n * @license MIT\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2013-2018 Viacheslav Lotsmanov\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n'use strict';\n\nfunction isSpecificValue(val) {\n\treturn (\n\t\tval instanceof Buffer\n\t\t|| val instanceof Date\n\t\t|| val instanceof RegExp\n\t) ? true : false;\n}\n\nfunction cloneSpecificValue(val) {\n\tif (val instanceof Buffer) {\n\t\tvar x = Buffer.alloc\n\t\t\t? Buffer.alloc(val.length)\n\t\t\t: new Buffer(val.length);\n\t\tval.copy(x);\n\t\treturn x;\n\t} else if (val instanceof Date) {\n\t\treturn new Date(val.getTime());\n\t} else if (val instanceof RegExp) {\n\t\treturn new RegExp(val);\n\t} else {\n\t\tthrow new Error('Unexpected situation');\n\t}\n}\n\n/**\n * Recursive cloning array.\n */\nfunction deepCloneArray(arr) {\n\tvar clone = [];\n\tarr.forEach(function (item, index) {\n\t\tif (typeof item === 'object' && item !== null) {\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\tclone[index] = deepCloneArray(item);\n\t\t\t} else if (isSpecificValue(item)) {\n\t\t\t\tclone[index] = cloneSpecificValue(item);\n\t\t\t} else {\n\t\t\t\tclone[index] = deepExtend({}, item);\n\t\t\t}\n\t\t} else {\n\t\t\tclone[index] = item;\n\t\t}\n\t});\n\treturn clone;\n}\n\nfunction safeGetProperty(object, property) {\n\treturn property === '__proto__' ? undefined : object[property];\n}\n\n/**\n * Extening object that entered in first argument.\n *\n * Returns extended object or false if have no target object or incorrect type.\n *\n * If you wish to clone source object (without modify it), just use empty new\n * object as first argument, like this:\n *   deepExtend({}, yourObj_1, [yourObj_N]);\n */\nvar deepExtend = module.exports = function (/*obj_1, [obj_2], [obj_N]*/) {\n\tif (arguments.length < 1 || typeof arguments[0] !== 'object') {\n\t\treturn false;\n\t}\n\n\tif (arguments.length < 2) {\n\t\treturn arguments[0];\n\t}\n\n\tvar target = arguments[0];\n\n\t// convert arguments to array and cut off target object\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\tvar val, src, clone;\n\n\targs.forEach(function (obj) {\n\t\t// skip argument if isn't an object, is null, or is an array\n\t\tif (typeof obj !== 'object' || obj === null || Array.isArray(obj)) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(obj).forEach(function (key) {\n\t\t\tsrc = safeGetProperty(target, key); // source value\n\t\t\tval = safeGetProperty(obj, key); // new value\n\n\t\t\t// recursion prevention\n\t\t\tif (val === target) {\n\t\t\t\treturn;\n\n\t\t\t/**\n\t\t\t * if new value isn't object then just overwrite by new value\n\t\t\t * instead of extending.\n\t\t\t */\n\t\t\t} else if (typeof val !== 'object' || val === null) {\n\t\t\t\ttarget[key] = val;\n\t\t\t\treturn;\n\n\t\t\t// just clone arrays (and recursive clone objects inside)\n\t\t\t} else if (Array.isArray(val)) {\n\t\t\t\ttarget[key] = deepCloneArray(val);\n\t\t\t\treturn;\n\n\t\t\t// custom cloning and overwrite for specific objects\n\t\t\t} else if (isSpecificValue(val)) {\n\t\t\t\ttarget[key] = cloneSpecificValue(val);\n\t\t\t\treturn;\n\n\t\t\t// overwrite by new value if source isn't object or array\n\t\t\t} else if (typeof src !== 'object' || src === null || Array.isArray(src)) {\n\t\t\t\ttarget[key] = deepExtend({}, val);\n\t\t\t\treturn;\n\n\t\t\t// source value and new value is objects both, extending...\n\t\t\t} else {\n\t\t\t\ttarget[key] = deepExtend(src, val);\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t});\n\n\treturn target;\n};\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\ntry {\n    var ce = new window.CustomEvent('test');\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n        // IE has problems with .preventDefault() on custom events\n        // http://stackoverflow.com/questions/23349191\n        throw new Error('Could not prevent default');\n    }\n} catch(e) {\n  var CustomEvent = function(event, params) {\n    var evt, origPrevent;\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n\n    evt = document.createEvent(\"CustomEvent\");\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    origPrevent = evt.preventDefault;\n    evt.preventDefault = function () {\n      origPrevent.call(this);\n      try {\n        Object.defineProperty(this, 'defaultPrevented', {\n          get: function () {\n            return true;\n          }\n        });\n      } catch(e) {\n        this.defaultPrevented = true;\n      }\n    };\n    return evt;\n  };\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent; // expose definition to window\n}\n","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nrequire('custom-event-polyfill');\n\nmodule.exports.before = function (el, html) {\n  el.insertAdjacentHTML('beforebegin', html);\n};\n\nmodule.exports.removeElement = function (el) {\n  if (el && el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\nmodule.exports.offset = function (el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    top: rect.top + document.body.scrollTop,\n    left: rect.left + document.body.scrollLeft\n  };\n};\n\nmodule.exports.parseHTML = function (string) {\n  var tmp = document.implementation.createHTMLDocument('');\n  tmp.body.innerHTML = string;\n  return tmp.body.children[0];\n};\n\nmodule.exports.hasClass = function (el, className) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  } else {\n    return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n  }\n};\n\nmodule.exports.replaceSelectionWithHtml = function (html) {\n  var range = void 0;\n  if (window.getSelection && window.getSelection().getRangeAt) {\n    range = window.getSelection().getRangeAt(0);\n    range.deleteContents();\n    var div = document.createElement(\"div\");\n    div.innerHTML = html;\n    var frag = document.createDocumentFragment(),\n        child = void 0;\n    while (child = div.firstChild) {\n      frag.appendChild(child);\n    }\n    range.insertNode(frag);\n  } else if (document.selection && document.selection.createRange) {\n    range = document.selection.createRange();\n    range.pasteHTML(html);\n  }\n};\n\nfunction deepExtend(out) {\n\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n    if (!obj) {\n      continue;\n    }\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') out[key] = deepExtend(out[key], obj[key]);else out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nmodule.exports.extend = deepExtend;\n\nmodule.exports.triggerEvent = function (el, eventName, options) {\n  var event = void 0;\n  if (window.CustomEvent) {\n    event = new CustomEvent(eventName, { cancelable: true });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, false, options);\n  }\n  el.dispatchEvent(event);\n};\n\nmodule.exports.removeIndentNewline = function (str) {\n  return str.replace(/(\\n|\\t)/g, '');\n};","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _aTemplate2 = require('a-template');\n\nvar _aTemplate3 = _interopRequireDefault(_aTemplate2);\n\nvar _clone = require('clone');\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepExtend = require('deep-extend');\n\nvar _deepExtend2 = _interopRequireDefault(_deepExtend);\n\nvar _util = require('./util.js');\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar template = '<!-- BEGIN showMenu:exist -->\\n<ul class=\"a-table-menu\" style=\"top:{menuY}px;left:{menuX}px;\">\\n\\t<!-- BEGIN mode:touch#cell -->\\n\\t<li data-action-click=\"mergeCells\">\\\\{message.mergeCells\\\\}</li>\\n\\t<li data-action-click=\"splitCell()\">\\\\{message.splitCell\\\\}</li>\\n\\t<li data-action-click=\"changeCellTypeTo(th)\">\\\\{message.changeToTh\\\\}</li>\\n\\t<li data-action-click=\"changeCellTypeTo(td)\">\\\\{message.changeToTd\\\\}</li>\\n\\t<li data-action-click=\"align(left)\">\\\\{message.alignLeft\\\\}</li>\\n\\t<li data-action-click=\"align(center)\">\\\\{message.alignCenter\\\\}</li>\\n\\t<li data-action-click=\"align(right)\">\\\\{message.alignRight\\\\}</li>\\n\\t<!-- END mode:touch#cell -->\\n\\t<!-- BEGIN mode:touch#col -->\\n\\t<li data-action-click=\"insertColLeft({selectedRowNo})\">\\\\{message.addColumnLeft\\\\}</li>\\n\\t<li data-action-click=\"insertColRight({selectedRowNo})\">\\\\{message.addColumnRight\\\\}</li>\\n\\t<li data-action-click=\"removeCol({selectedRowNo})\">\\\\{message.removeColumn\\\\}</li>\\n\\t<!-- END mode:touch#col -->\\n\\t<!-- BEGIN mode:touch#row -->\\n\\t<li data-action-click=\"insertRowAbove({selectedColNo})\">\\\\{message.addRowTop\\\\}</li>\\n\\t<li data-action-click=\"insertRowBelow({selectedColNo})\">\\\\{message.addRowBottom\\\\}</li>\\n\\t<li data-action-click=\"removeRow({selectedColNo})\">\\\\{message.removeRow\\\\}</li>\\n\\t<!-- END mode:touch#row -->\\n</ul>\\n<!-- END showMenu:exist -->\\n<div class=\"a-table-wrapper\">\\n\\t<!-- BEGIN inputMode:touch#table -->\\n\\t<table class=\"a-table\">\\n\\t\\t<tr class=\"a-table-header js-table-header\">\\n\\t\\t\\t<th class=\"a-table-first\"></th>\\n\\t\\t\\t<!-- BEGIN highestRow:loop -->\\n\\t\\t\\t<th data-action-click=\"selectRow({i})\"<!-- \\\\BEGIN selectedRowNo:touch#{i} -->class=\"selected\"<!-- \\\\END selectedRowNo:touch#{i} -->><span class=\"a-table-toggle-btn\"></span></th>\\n\\t\\t\\t<!-- END highestRow:loop -->\\n\\t\\t</tr>\\n\\t\\t<!-- BEGIN row:loop -->\\n\\t\\t<tr>\\n\\t\\t\\t<th class=\"a-table-side js-table-side<!-- \\\\BEGIN selectedColNo:touch#{i} --> selected<!-- \\\\END selectedColNo:touch#{i} -->\" data-action-click=\"selectCol({i})\"><span class=\"a-table-toggle-btn\"></span></th>\\n\\t\\t\\t<!-- \\\\BEGIN row.{i}.col:loop -->\\n\\t\\t\\t<td colspan=\"\\\\{colspan\\\\}\" rowspan=\"\\\\{rowspan\\\\}\" data-action=\"updateTable(\\\\{i\\\\},{i})\" data-cell-id=\"\\\\{i\\\\}-{i}\" class=\"<!-- \\\\BEGIN selected:exist -->a-table-selected<!-- \\\\END selected:exist --><!-- \\\\BEGIN type:touch#th --> a-table-th<!-- END \\\\type:touch#th --><!-- \\\\BEGIN mark.top:exist --> a-table-border-top<!-- \\\\END mark.top:exist --><!-- \\\\BEGIN mark.right:exist --> a-table-border-right<!-- \\\\END mark.right:exist --><!-- \\\\BEGIN mark.bottom:exist --> a-table-border-bottom<!-- \\\\END mark.bottom:exist --><!-- \\\\BEGIN mark.left:exist --> a-table-border-left<!-- \\\\END mark.left:exist --><!-- \\\\BEGIN cellClass:exist --> \\\\{cellClass\\\\}<!-- \\\\END cellClass:exist -->\"><div class=\"a-table-editable \\\\{align\\\\}\" contenteditable>\\\\{value\\\\}</div></td>\\n\\t\\t\\t<!-- \\\\END row.{i}.col:loop -->\\n\\t\\t</tr>\\n\\t\\t<!-- END row:loop -->\\n\\t</table>\\n\\t<!-- END inputMode:touch#table -->\\n\\t<!-- BEGIN inputMode:touch#source -->\\n\\t<textarea data-bind=\"tableResult\" class=\"a-table-textarea\" data-action-input=\"updateResult\"></textarea>\\n\\t<!-- END inputMode:touch#source -->\\n</div>\\n';\nvar menu = '<!-- BEGIN showBtnList:exist -->\\n<div class=\"a-table-btn-group-list\">\\n\\t<div class=\"\\\\{mark.btn.group\\\\}\">\\n\\t\\t<!-- BEGIN inputMode:touch#table -->\\n\\t\\t<button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"changeInputMode(source)\"><i class=\"\\\\{mark.icon.source\\\\}\"></i>\\\\{message.source\\\\}</button>\\n\\t\\t<!-- END inputMode:touch#table -->\\n\\t\\t<!-- BEGIN inputMode:touch#source -->\\n\\t\\t<button type=\"button\" class=\"\\\\{mark.btn.itemActive\\\\}\" data-action-click=\"changeInputMode(table)\"><i class=\"\\\\{mark.icon.source\\\\}\"></i>\\\\{message.source\\\\}</button>\\n\\t\\t<!-- END inputMode:touch#source -->\\n\\t</div>\\n\\t<div class=\"\\\\{mark.btn.group\\\\}\">\\n\\t\\t<button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"mergeCells\"><i class=\"\\\\{mark.icon.merge\\\\}\"></i></button><button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"splitCell()\"><i class=\"\\\\{mark.icon.split\\\\}\"></i></button><button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"undo()\"><i class=\"\\\\{mark.icon.undo\\\\}\"></i></button>\\n\\t</div>\\n\\t<div class=\"\\\\{mark.btn.group\\\\}\">\\n\\t\\t<button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"changeCellTypeTo(td)\"><!-- BEGIN mark.icon.td:empty -->td<!-- END mark.icon.td:empty --><!-- BEGIN mark.icon.td:exist --><i class=\"\\\\{mark.icon.td\\\\}\"></i><!-- END mark.icon.td:exist --></button><button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"changeCellTypeTo(th)\"><!-- BEGIN mark.icon.th:empty -->th<!-- END mark.icon.th:empty --><!-- BEGIN mark.icon.th:exist --><i class=\"\\\\{mark.icon.th\\\\}\"></i><!-- END mark.icon.th:exist --></button>\\n\\t</div>\\n\\t<div class=\"\\\\{mark.btn.group\\\\}\">\\n\\t\\t<button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"align(left)\"><i class=\"\\\\{mark.icon.alignLeft\\\\}\"></i></button><button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"align(center)\"><i class=\"\\\\{mark.icon.alignCenter\\\\}\"></i></button><button type=\"button\" class=\"\\\\{mark.btn.item\\\\}\" data-action-click=\"align(right)\"><i class=\"\\\\{mark.icon.alignRight\\\\}\"></i></button>\\n\\t</div>\\n\\t<div class=\"\\\\{mark.btn.group\\\\}\">\\n\\t\\t<select class=\"\\\\{mark.selector.self\\\\}\" data-bind=\"cellClass\" data-action-change=\"changeCellClass()\">\\n\\t\\t\\t<option value=\"\"></option>\\n\\t\\t\\t<!-- BEGIN selector.option:loop -->\\n\\t\\t\\t<option value=\"{value}\">{label}</option>\\n\\t\\t\\t<!-- END selector.option:loop -->\\n\\t\\t</select>\\n\\t</div>\\n</div>\\n<!-- END showBtnList:exist -->\\n';\nvar returnTable = '<table class=\"{tableClass}\">\\n\\t<!-- BEGIN row:loop -->\\n\\t<tr>\\n\\t\\t<!-- \\\\BEGIN row.{i}.col:loop -->\\n\\t\\t<!-- \\\\BEGIN type:touch#th -->\\n\\t\\t<th<!-- \\\\BEGIN colspan:touchnot#1 --> colspan=\"\\\\{colspan\\\\}\"<!-- \\\\END colspan:touchnot#1 --><!-- \\\\BEGIN rowspan:touchnot#1 --> rowspan=\"\\\\{rowspan\\\\}\"<!-- \\\\END rowspan:touchnot#1 --> class=\"<!-- \\\\BEGIN align:exist -->\\\\{align\\\\}[getStyleByAlign]<!-- \\\\END align:exist --><!-- \\\\BEGIN cellClass:exist --> \\\\{cellClass\\\\}<!-- \\\\END cellClass:exist -->\">\\\\{value\\\\}</th>\\n\\t\\t<!-- \\\\END type:touch#th -->\\n\\t\\t<!-- \\\\BEGIN type:touch#td -->\\n\\t\\t<td<!-- \\\\BEGIN colspan:touchnot#1 --> colspan=\"\\\\{colspan\\\\}\"<!-- \\\\END colspan:touchnot#1 --><!-- \\\\BEGIN rowspan:touchnot#1 --> rowspan=\"\\\\{rowspan\\\\}\"<!-- \\\\END rowspan:touchnot#1 --> class=\"<!-- \\\\BEGIN align:exist -->\\\\{align\\\\}[getStyleByAlign] <!-- \\\\END align:exist --><!-- \\\\BEGIN cellClass:exist -->\\\\{cellClass\\\\}<!-- \\\\END cellClass:exist -->\">\\\\{value\\\\}</td>\\n\\t\\t<!-- \\\\END type:touch#td -->\\n\\t\\t<!-- \\\\END row.{i}.col:loop -->\\n\\t</tr>\\n\\t<!-- END row:loop -->\\n</table>\\n';\n\n\nvar defs = {\n  showBtnList: true,\n  lang: 'en',\n  mark: {\n    align: {\n      default: 'left',\n      left: 'left',\n      center: 'center',\n      right: 'right'\n    },\n    btn: {\n      group: 'a-table-btn-list',\n      item: 'a-table-btn',\n      itemActive: 'a-table-btn-active'\n    },\n    icon: {\n      alignLeft: 'a-table-icon a-table-icon-left',\n      alignCenter: 'a-table-icon a-table-icon-center',\n      alignRight: 'a-table-icon a-table-icon-right',\n      undo: 'a-table-icon a-table-icon-undo',\n      merge: 'a-table-icon a-table-icon-merge02',\n      split: 'a-table-icon a-table-icon-split02',\n      table: 'a-table-icon a-table-icon-th02',\n      source: 'a-table-icon a-table-icon-source01',\n      td: 'a-table-icon a-table-icon-td03',\n      th: 'a-table-icon a-table-icon-th02'\n    },\n    selector: {\n      self: 'a-table-selector'\n    }\n  },\n  message: {\n    mergeCells: 'merge cell',\n    splitCell: 'split cell',\n    changeToTh: 'change to th',\n    changeToTd: 'change to td',\n    alignLeft: 'align left',\n    alignCenter: 'align center',\n    alignRight: 'align right',\n    addColumnLeft: 'insert column on the left',\n    addColumnRight: 'insert column on the right',\n    removeColumn: 'remove column',\n    addRowTop: 'insert row above',\n    addRowBottom: 'insert row below',\n    removeRow: 'remove row',\n    source: 'Source',\n    mergeCellError1: 'All possible cells should be selected so to merge cells into one',\n    mergeCellConfirm1: 'The top left cell\\'s value of the selected range will only be saved. Are you sure you want to continue?',\n    pasteError1: 'You can\\'t paste here',\n    splitError1: 'Cell is not selected',\n    splitError2: 'Only one cell should be selected',\n    splitError3: 'You can\\'t split the cell anymore'\n  }\n};\n\nvar aTable = function (_aTemplate) {\n  _inherits(aTable, _aTemplate);\n\n  function aTable(ele, option) {\n    _classCallCheck(this, aTable);\n\n    var _this = _possibleConstructorReturn(this, (aTable.__proto__ || Object.getPrototypeOf(aTable)).call(this));\n\n    _this.id = aTable.getUniqId();\n    _this.menu_id = aTable.getUniqId();\n    _this.addTemplate(_this.id, template);\n    _this.addTemplate(_this.menu_id, _util2.default.removeIndentNewline(menu));\n    _this.data = (0, _deepExtend2.default)({}, defs, option);\n    var data = _this.data;\n    var selector = typeof ele === 'string' ? document.querySelector(ele) : ele;\n    data.point = { x: -1, y: -1 };\n    data.selectedRowNo = -1;\n    data.selectedColNo = -1;\n    data.showBtnList = true;\n    data.row = _this.parse('<table>' + selector.innerHTML + '</table>');\n    data.tableResult = _this.getTable();\n    data.tableClass = selector.getAttribute('class');\n    data.highestRow = _this.highestRow;\n    data.history = [];\n    data.inputMode = 'table';\n    data.cellClass = '';\n    data.history.push((0, _clone2.default)(data.row));\n    _this.convert = {};\n    _this.convert.getStyleByAlign = _this.getStyleByAlign;\n    _this.convert.setClass = _this.setClass;\n    var html = '\\n    <div class=\\'a-table-container\\'>\\n        <div data-id=\\'' + _this.menu_id + '\\'></div>\\n        <div class=\\'a-table-outer\\'>\\n          <div class=\\'a-table-inner\\'>\\n            <div data-id=\\'' + _this.id + '\\'></div>\\n          </div>\\n        </div>\\n    </div>';\n    _util2.default.before(selector, html);\n    _util2.default.removeElement(selector);\n    _this.update();\n    return _this;\n  }\n\n  _createClass(aTable, [{\n    key: 'highestRow',\n    value: function highestRow() {\n      var arr = [];\n      var firstRow = this.data.row[0];\n      var i = 0;\n      if (!firstRow) {\n        return arr;\n      }\n      var row = firstRow.col;\n      row.forEach(function (item) {\n        var length = parseInt(item.colspan);\n        for (var t = 0; t < length; t++) {\n          arr.push(i);\n          i++;\n        }\n      });\n      return arr;\n    }\n  }, {\n    key: '_getTableLength',\n    value: function _getTableLength(table) {\n      return {\n        x: this._getRowLength(table[0].col),\n        y: this._getColLength(table)\n      };\n    }\n  }, {\n    key: '_getRowLength',\n    value: function _getRowLength(row) {\n      var length = 0;\n      row.forEach(function (item) {\n        length += parseInt(item.colspan);\n      });\n      return length;\n    }\n  }, {\n    key: '_getColLength',\n    value: function _getColLength(table) {\n      var length = 0;\n      var rowspan = 0;\n      table.forEach(function (row) {\n        if (rowspan === 0) {\n          rowspan = parseInt(row.col[0].rowspan);\n          length += rowspan;\n        }\n        rowspan--;\n      });\n      return length;\n    }\n  }, {\n    key: '_getElementByQuery',\n    value: function _getElementByQuery(query) {\n      return document.querySelector('[data-id=\\'' + this.id + '\\'] ' + query);\n    }\n  }, {\n    key: '_getElementsByQuery',\n    value: function _getElementsByQuery(query) {\n      return document.querySelectorAll('[data-id=\\'' + this.id + '\\'] ' + query);\n    }\n  }, {\n    key: '_getSelf',\n    value: function _getSelf() {\n      return document.querySelector('[data-id=\\'' + this.id + '\\']');\n    }\n  }, {\n    key: 'getCellByIndex',\n    value: function getCellByIndex(x, y) {\n      return this._getElementByQuery('[data-cell-id=\\'' + x + '-' + y + '\\']');\n    }\n  }, {\n    key: 'getCellInfoByIndex',\n    value: function getCellInfoByIndex(x, y) {\n      var id = this.id;\n      var cell = this.getCellByIndex(x, y);\n      if (!cell) {\n        return false;\n      }\n      var pos = _util2.default.offset(cell);\n      var left = pos.left;\n      var top = pos.top;\n      var returnLeft = -1;\n      var returnTop = -1;\n      var width = parseInt(cell.getAttribute('colspan'));\n      var height = parseInt(cell.getAttribute('rowspan'));\n      var headers = this._getElementsByQuery('.js-table-header th');\n      var sides = this._getElementsByQuery('.js-table-side');\n      [].forEach.call(headers, function (header, index) {\n        if (_util2.default.offset(header).left === left) {\n          returnLeft = index;\n        }\n      });\n      [].forEach.call(sides, function (side, index) {\n        if (_util2.default.offset(side).top === top) {\n          returnTop = index;\n        }\n      });\n      return { x: returnLeft - 1, y: returnTop, width: width, height: height };\n    }\n  }, {\n    key: 'getLargePoint',\n    value: function getLargePoint() {\n      var minXArr = [];\n      var minYArr = [];\n      var maxXArr = [];\n      var maxYArr = [];\n      for (var i = 0, n = arguments.length; i < n; i++) {\n        minXArr.push(arguments[i].x);\n        minYArr.push(arguments[i].y);\n        maxXArr.push(arguments[i].x + arguments[i].width);\n        maxYArr.push(arguments[i].y + arguments[i].height);\n      }\n      var minX = Math.min.apply(Math, minXArr);\n      var minY = Math.min.apply(Math, minYArr);\n      var maxX = Math.max.apply(Math, maxXArr);\n      var maxY = Math.max.apply(Math, maxYArr);\n      return { x: minX, y: minY, width: maxX - minX, height: maxY - minY };\n    }\n  }, {\n    key: 'getSelectedPoints',\n    value: function getSelectedPoints() {\n      var arr = [];\n      var self = this;\n      this.data.row.forEach(function (item, i) {\n        if (!item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          if (obj.selected) {\n            var point = self.getCellInfoByIndex(t, i);\n            if (point) {\n              arr.push(point);\n            }\n          }\n        });\n      });\n      return arr;\n    }\n  }, {\n    key: 'getSelectedPoint',\n    value: function getSelectedPoint() {\n      var arr = this.getSelectedPoints();\n      if (arr && arr[0]) {\n        return arr[0];\n      }\n    }\n  }, {\n    key: 'getAllPoints',\n    value: function getAllPoints() {\n      var arr = [];\n      var self = this;\n      this.data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return;\n        }\n        item.col.forEach(function (obj, t) {\n          var point = self.getCellInfoByIndex(t, i);\n          if (point) {\n            arr.push(point);\n          }\n        });\n      });\n      return arr;\n    }\n  }, {\n    key: 'getCellIndexByPos',\n    value: function getCellIndexByPos(x, y) {\n      var a = void 0,\n          b = void 0;\n      var self = this;\n      this.data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return;\n        }\n        item.col.forEach(function (obj, t) {\n          var point = self.getCellInfoByIndex(t, i);\n          if (point.x === x && point.y === y) {\n            a = t;\n            b = i;\n          }\n        });\n      });\n      return { row: b, col: a };\n    }\n  }, {\n    key: 'getCellByPos',\n    value: function getCellByPos(x, y) {\n      var index = this.getCellIndexByPos(x, y);\n      if (!this.data.row[index.row]) {\n        return;\n      }\n      return this.data.row[index.row].col[index.col];\n    }\n  }, {\n    key: 'hitTest',\n    value: function hitTest(point1, point2) {\n      if (point1.x < point2.x + point2.width && point2.x < point1.x + point1.width && point1.y < point2.y + point2.height && point2.y < point1.y + point1.height) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'markup',\n    value: function markup() {\n      var data = this.data;\n      if (data.splited) {\n        data.splited = false;\n        return;\n      }\n      var points = this.getSelectedPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var self = this;\n      data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          var point = self.getCellInfoByIndex(t, i);\n          var mark = {};\n          if (obj.selected) {\n            if (point.x === point1.x) {\n              mark.left = true;\n            }\n            if (point.x + point.width === point1.x + point1.width) {\n              mark.right = true;\n            }\n            if (point.y === point1.y) {\n              mark.top = true;\n            }\n            if (point.y + point.height === point1.y + point1.height) {\n              mark.bottom = true;\n            }\n          }\n          obj.mark = mark;\n        });\n      });\n    }\n  }, {\n    key: 'selectRange',\n    value: function selectRange(a, b) {\n      var data = this.data;\n      if (!data.point) {\n        return;\n      }\n      var self = this;\n      data.row[a].col[b].selected = true;\n      var points = this.getSelectedPoints();\n      var point3 = this.getLargePoint.apply(null, points);\n      data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          var point = self.getCellInfoByIndex(t, i);\n          if (point && self.hitTest(point3, point)) {\n            obj.selected = true;\n          }\n        });\n      });\n      if (points.length > 1) {\n        this.update();\n      }\n    }\n  }, {\n    key: 'select',\n    value: function select(a, b) {\n      var data = this.data;\n      data.point = { x: b, y: a };\n      data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          if (i !== a || t !== b) {\n            obj.selected = false;\n          }\n        });\n      });\n      if (!data.row[a].col[b].selected) {\n        data.row[a].col[b].selected = true;\n      }\n    }\n  }, {\n    key: 'unselectCells',\n    value: function unselectCells() {\n      this.data.row.forEach(function (item, i) {\n        if (!item || !item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          obj.selected = false;\n        });\n      });\n    }\n  }, {\n    key: 'removeCell',\n    value: function removeCell(cell) {\n      var row = this.data.row;\n      for (var i = 0, n = row.length; i < n; i++) {\n        var col = row[i].col;\n        for (var t = 0, m = col.length; t < m; t++) {\n          var obj = col[t];\n          if (obj === cell) {\n            col.splice(t, 1);\n            t--;\n            m--;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'removeSelectedCellExcept',\n    value: function removeSelectedCellExcept(cell) {\n      var row = this.data.row;\n      for (var i = 0, n = row.length; i < n; i++) {\n        var col = row[i].col;\n        for (var t = 0, m = col.length; t < m; t++) {\n          var obj = col[t];\n          if (obj !== cell && obj.selected) {\n            col.splice(t, 1);\n            t--;\n            m--;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'contextmenu',\n    value: function contextmenu() {\n      var data = this.data;\n      this.e.preventDefault();\n      data.showMenu = true;\n      data.menuX = this.e.clientX;\n      data.menuY = this.e.clientY;\n      this.update();\n    }\n  }, {\n    key: 'parse',\n    value: function parse(html) {\n      var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'html';\n\n      var self = this;\n      var arr1 = [];\n      var doc = _util2.default.parseHTML(html);\n      var trs = doc.querySelectorAll('tr');\n      [].forEach.call(trs, function (tr) {\n        var ret2 = {};\n        var arr2 = [];\n        var cells = tr.querySelectorAll('th,td');\n        ret2.col = arr2;\n        [].forEach.call(cells, function (cell) {\n          var obj = {};\n          var html = format === 'html' ? cell.innerHTML : cell.innerText;\n          if (cell.tagName === 'TH') {\n            obj.type = 'th';\n          } else {\n            obj.type = 'td';\n          }\n          obj.colspan = cell.getAttribute('colspan') || 1;\n          obj.rowspan = cell.getAttribute('rowspan') || 1;\n          obj.value = '';\n          if (html) {\n            obj.value = html.replace(/{(.*?)}/g, '&lcub;$1&rcub;');\n          }\n          var classAttr = cell.getAttribute('class');\n          var cellClass = '';\n          if (classAttr) {\n            var classList = classAttr.split(/\\s+/);\n            classList.forEach(function (item) {\n              var align = self.getAlignByStyle(item);\n              if (align) {\n                obj.align = align;\n              } else {\n                cellClass += ' ' + item;\n              }\n            });\n          }\n          obj.cellClass = cellClass.substr(1);\n          arr2.push(obj);\n        });\n        arr1.push(ret2);\n      });\n      return arr1;\n    }\n  }, {\n    key: 'parseText',\n    value: function parseText(text) {\n      var arr1 = [];\n      // replace newline codes inside double quotes to <br> tag\n      text = text.replace(/\"(([\\n\\r\\t]|.)*?)\"/g, function (match, str) {\n        return str.replace(/[\\n\\r]/g, '<br>');\n      });\n      var rows = text.split(String.fromCharCode(13));\n      rows.forEach(function (row) {\n        var ret2 = {};\n        var arr2 = [];\n        ret2.col = arr2;\n        var cells = row.split(String.fromCharCode(9));\n        cells.forEach(function (cell) {\n          var obj = {};\n          obj.type = 'td';\n          obj.colspan = 1;\n          obj.rowspan = 1;\n          obj.value = '';\n          if (cell) {\n            obj.value = cell.replace(/{(.*?)}/g, '&lcub;$1&rcub;');\n          }\n          arr2.push(obj);\n        });\n        arr1.push(ret2);\n      });\n      return arr1;\n    }\n  }, {\n    key: 'getTableClass',\n    value: function getTableClass(html) {\n      return _util2.default.parseHTML(html).getAttribute('class');\n    }\n  }, {\n    key: 'toMarkdown',\n    value: function toMarkdown(html) {\n      var table = _util2.default.parseHTML(html);\n      var ret = '';\n      var trs = table.querySelectorAll('tr');\n      [].forEach.call(trs, function (tr, i) {\n        ret += '| ';\n        var children = tr.querySelectorAll('td,th');\n        [].forEach.call(children, function (child) {\n          ret += child.innerHTML;\n          ret += ' | ';\n        });\n        if (i === 0) {\n          ret += '\\n| ';\n          [].forEach.call(children, function (child) {\n            ret += '--- | ';\n          });\n        }\n        ret += '\\n';\n      });\n      return ret;\n    }\n  }, {\n    key: 'getTable',\n    value: function getTable() {\n      return this.getHtml(returnTable, true).replace(/ class=\"\"/g, '').replace(/class=\"(.*)? \"/g, 'class=\"$1\"');\n    }\n  }, {\n    key: 'getMarkdown',\n    value: function getMarkdown() {\n      return this.toMarkdown(this.getHtml(returnTable, true));\n    }\n  }, {\n    key: 'putCaret',\n    value: function putCaret(elem) {\n      if (!elem) {\n        return;\n      }\n      elem.focus();\n      if (typeof window.getSelection !== 'undefined' && typeof document.createRange !== 'undefined') {\n        var range = document.createRange();\n        range.selectNodeContents(elem);\n        range.collapse(false);\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.body.createTextRange !== 'undefined') {\n        var textRange = document.body.createTextRange();\n        textRange.moveToElementText(elem);\n        textRange.collapse(false);\n        textRange.select();\n      }\n    }\n  }, {\n    key: 'onUpdated',\n    value: function onUpdated() {\n      var _this2 = this;\n\n      var points = this.getAllPoints();\n      var point = this.getLargePoint.apply(null, points);\n      var width = point.width;\n      var table = this._getElementByQuery('table');\n      var inner = this._getSelf().parentNode;\n      var elem = this._getElementByQuery('.a-table-selected .a-table-editable');\n      var selectedPoints = this.getSelectedPoints();\n      if (elem && !this.data.showMenu && selectedPoints.length === 1) {\n        setTimeout(function () {\n          _this2.putCaret(elem);\n        }, 1);\n      }\n\n      // for scroll\n      if (table) {\n        inner.style.width = '9999px';\n        var tableWidth = table.offsetWidth;\n        inner.style.width = tableWidth + 'px';\n      } else {\n        inner.style.width = 'auto';\n      }\n\n      if (this.afterRendered) {\n        this.afterRendered();\n      }\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var data = this.data;\n      var row = data.row;\n      var hist = data.history;\n      if (data.history.length === 0) {\n        return;\n      }\n\n      while (JSON.stringify(row) === JSON.stringify(data.row)) {\n        row = hist.pop();\n      }\n\n      if (row) {\n        if (hist.length === 0) {\n          hist.push((0, _clone2.default)(row));\n        }\n        data.row = row;\n        this.update();\n      }\n    }\n  }, {\n    key: 'insertRow',\n    value: function insertRow(a, newrow) {\n      var data = this.data;\n      var row = data.row;\n      if (row[a]) {\n        row.splice(a, 0, { col: newrow });\n      } else if (row.length === a) {\n        row.push({ col: newrow });\n      }\n    }\n  }, {\n    key: 'insertCellAt',\n    value: function insertCellAt(a, b, item) {\n      var data = this.data;\n      var row = data.row;\n      if (row[a] && row[a].col) {\n        row[a].col.splice(b, 0, item);\n      }\n    }\n  }, {\n    key: 'selectRow',\n    value: function selectRow(i) {\n      var data = this.data;\n      this.unselectCells();\n      data.showMenu = false;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var newpoint = { x: parseInt(i), y: 0, width: 1, height: point1.height };\n      var targetPoints = [];\n      var self = this;\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      targetPoints.forEach(function (point) {\n        var cell = self.getCellByPos(point.x, point.y);\n        cell.selected = true;\n      });\n      data.mode = 'col';\n      data.selectedColNo = -1;\n      data.selectedRowNo = i;\n      this.contextmenu();\n      this.update();\n    }\n  }, {\n    key: 'selectCol',\n    value: function selectCol(i) {\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var newpoint = { x: 0, y: parseInt(i), width: point1.width, height: 1 };\n      var targetPoints = [];\n      var self = this;\n      var data = this.data;\n      this.unselectCells();\n      data.showMenu = false;\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      targetPoints.forEach(function (point) {\n        var cell = self.getCellByPos(point.x, point.y);\n        cell.selected = true;\n      });\n      data.mode = 'row';\n      data.selectedRowNo = -1;\n      data.selectedColNo = i;\n      this.contextmenu();\n      this.update();\n    }\n  }, {\n    key: 'removeCol',\n    value: function removeCol(selectedno) {\n      var data = this.data;\n      data.showMenu = false;\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var newpoint = { x: parseInt(selectedno), y: 0, width: 1, height: point1.height };\n      var targetPoints = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      targetPoints.forEach(function (point) {\n        var cell = self.getCellByPos(point.x, point.y);\n        if (cell.colspan === 1) {\n          self.removeCell(cell);\n        } else {\n          cell.colspan = parseInt(cell.colspan) - 1;\n        }\n      });\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'removeRow',\n    value: function removeRow(selectedno) {\n      var data = this.data;\n      data.showMenu = false;\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      selectedno = parseInt(selectedno);\n      var newpoint = { x: 0, y: selectedno, width: point1.width, height: 1 };\n      var nextpoint = { x: 0, y: selectedno + 1, width: point1.width, height: 1 };\n      var targetPoints = [];\n      var removeCells = [];\n      var insertCells = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      points.forEach(function (point) {\n        if (self.hitTest(nextpoint, point)) {\n          var cell = self.getCellByPos(point.x, point.y);\n          cell.x = point.x;\n          if (point.y === nextpoint.y) {\n            insertCells.push(cell);\n          }\n        }\n      });\n      targetPoints.forEach(function (point) {\n        var cell = self.getCellByPos(point.x, point.y);\n        if (cell.rowspan === 1) {\n          removeCells.push(cell);\n        } else {\n          cell.rowspan = parseInt(cell.rowspan) - 1;\n          if (selectedno === point.y) {\n            cell.x = point.x;\n            insertCells.push(cell);\n          }\n        }\n      });\n      insertCells.sort(function (a, b) {\n        if (a.x > b.x) {\n          return 1;\n        }\n        return -1;\n      });\n      removeCells.forEach(function (cell) {\n        self.removeCell(cell);\n      });\n      data.row.splice(selectedno, 1);\n      if (insertCells.length > 0) {\n        data.row[selectedno] = { col: insertCells };\n      }\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'updateTable',\n    value: function updateTable(b, a) {\n      var data = this.data;\n      var e = this.e;\n      var type = e.type;\n      var points = this.getSelectedPoints();\n      var isSmartPhone = aTable.isSmartPhone();\n      if (type === 'mouseup' && this.data.showMenu) {\n        return;\n      }\n      var _ref = [parseInt(a), parseInt(b)];\n      a = _ref[0];\n      b = _ref[1];\n\n      data.mode = 'cell';\n      data.selectedRowNo = -1;\n      data.selectedColNo = -1;\n      data.showMenu = false;\n      if (type === 'compositionstart') {\n        data.beingInput = true;\n      } else if (type === 'compositionend') {\n        data.beingInput = false;\n      } else if (type === 'click' && !isSmartPhone) {\n        if (this.e.shiftKey) {\n          this.selectRange(a, b);\n        }\n      } else if (type === 'keydown' && e.keyCode == 67 && (e.ctrlKey || e.metaKey)) {\n        var elem = this._getElementByQuery('.a-table-selected .a-table-editable');\n        _util2.default.triggerEvent(elem, 'copy');\n      } else if (type === 'copy') {\n        this.copyTable(e);\n      } else if (type === 'paste') {\n        this.pasteTable(e);\n      } else if (type === 'mousedown' && !isSmartPhone) {\n        if (this.e.button !== 2 && !this.e.ctrlKey) {\n          this.mousedown = true;\n          if (!this.data.beingInput) {\n            if (points.length !== 1 || !this.data.row[a].col[b].selected) {\n              this.select(a, b);\n              this.update();\n            }\n          }\n        }\n      } else if (type === 'mousemove' && !isSmartPhone) {\n        if (this.mousedown) {\n          this.selectRange(a, b);\n        }\n      } else if (type === 'mouseup' && !isSmartPhone) {\n        this.mousedown = false;\n        var _elem = this._getElementByQuery('.a-table-selected .a-table-editable');\n        if (points.length > 1) {\n          this.putCaret(_elem);\n        }\n      } else if (type === 'contextmenu') {\n        this.mousedown = false;\n        this.contextmenu();\n      } else if (type === 'touchstart') {\n        if (points.length !== 1 || !this.data.row[a].col[b].selected) {\n          if (!this.data.beingInput) {\n            this.select(a, b);\n            this.update();\n          }\n        } // todo\n      } else if (type === 'input') {\n        if (_util2.default.hasClass(this.e.target, 'a-table-editable') && this.e.target.parentNode.getAttribute('data-cell-id') === b + '-' + a) {\n          data.history.push((0, _clone2.default)(data.row));\n          data.row[a].col[b].value = this.e.target.innerHTML.replace(/{(.*?)}/g, '&lcub;$1&rcub;');\n        }\n        if (this.afterEntered) {\n          this.afterEntered();\n        }\n      } else if (type === 'keyup' && aTable.getBrowser().indexOf('ie') !== -1) {\n        if (_util2.default.hasClass(this.e.target, 'a-table-editable') && this.e.target.parentNode.getAttribute('data-cell-id') === b + '-' + a) {\n          data.history.push((0, _clone2.default)(data.row));\n          data.row[a].col[b].value = this.e.target.innerHTML.replace(/{(.*?)}/g, '&lcub;$1&rcub;');\n        }\n        if (this.afterEntered) {\n          this.afterEntered();\n        }\n      }\n    }\n  }, {\n    key: 'copyTable',\n    value: function copyTable(e) {\n      var points = this.getSelectedPoints();\n      if (points.length <= 1) {\n        return;\n      }\n      e.preventDefault();\n      var copy_text = '<meta name=\"generator\" content=\"Sheets\"><table>';\n      this.data.row.forEach(function (item, i) {\n        if (!item.col) {\n          return false;\n        }\n        copy_text += '<tr>';\n        item.col.forEach(function (obj, t) {\n          if (obj.selected) {\n            copy_text += '<' + obj.type + ' colspan=\"' + obj.colspan + '\" rowspan=\"' + obj.rowspan + '\">' + obj.value + '</' + obj.type + '>';\n          }\n        });\n        copy_text += '</tr>';\n      });\n      copy_text += '</table>';\n      copy_text = copy_text.replace(/<table>(<tr><\\/tr>)*/g, \"<table>\");\n      copy_text = copy_text.replace(/(<tr><\\/tr>)*<\\/table>/g, \"</table>\");\n      if (e.clipboardData) {\n        e.clipboardData.setData('text/html', copy_text);\n      } else if (window.clipboardData) {\n        window.clipboardData.setData('Text', copy_text);\n      }\n    }\n  }, {\n    key: 'pasteTable',\n    value: function pasteTable(e) {\n      var pastedData = void 0;\n      var data = this.data;\n      if (e.clipboardData) {\n        var html = e.clipboardData.getData('text/html');\n        if (!html) {\n          html = e.clipboardData.getData('text/plain');\n        }\n        this.processPaste(html);\n      } else if (window.clipboardData) {\n        this.getClipBoardData();\n      }\n    }\n  }, {\n    key: 'getClipBoardData',\n    value: function getClipBoardData() {\n      var savedContent = document.createDocumentFragment();\n      var point = this.getSelectedPoint();\n      var index = this.getCellIndexByPos(point.x, point.y);\n      var cell = this.getCellByIndex(index.col, index.row);\n      var editableDiv = cell.querySelector('.a-table-editable');\n      while (editableDiv.childNodes.length > 0) {\n        savedContent.appendChild(editableDiv.childNodes[0]);\n      }\n      this.waitForPastedData(editableDiv, savedContent);\n      return true;\n    }\n  }, {\n    key: 'waitForPastedData',\n    value: function waitForPastedData(elem, savedContent) {\n      var _this3 = this;\n\n      if (elem.childNodes && elem.childNodes.length > 0) {\n        var pastedData = elem.innerHTML;\n        elem.innerHTML = \"\";\n        elem.appendChild(savedContent);\n        this.processPaste(pastedData);\n      } else {\n        setTimeout(function () {\n          _this3.waitForPastedData(elem, savedContent);\n        }, 20);\n      }\n    }\n  }, {\n    key: 'processPaste',\n    value: function processPaste(pastedData) {\n      var e = this.e;\n      e.preventDefault();\n      var selectedPoint = this.getSelectedPoint();\n      var tableHtml = pastedData.match(/<table(([\\n\\r\\t]|.)*?)>(([\\n\\r\\t]|.)*?)<\\/table>/i);\n      var data = this.data;\n      if (tableHtml && tableHtml[0]) {\n        var newRow = this.parse(tableHtml[0], 'text');\n        if (newRow && newRow.length) {\n          this.insertTable(newRow, {\n            x: selectedPoint.x,\n            y: selectedPoint.y\n          });\n          data.history.push((0, _clone2.default)(data.row));\n          return;\n        }\n      }\n      // for excel;\n      var row = this.parseText(pastedData);\n      if (row && row[0] && row[0].col && row[0].col.length > 1) {\n        var _selectedPoint = this.getSelectedPoint();\n        this.insertTable(row, {\n          x: _selectedPoint.x,\n          y: _selectedPoint.y\n        });\n        this.update();\n        data.history.push((0, _clone2.default)(data.row));\n      } else {\n        if (e.clipboardData) {\n          var content = e.clipboardData.getData('text/plain');\n          document.execCommand('insertText', false, content);\n        } else if (window.clipboardData) {\n          var _content = window.clipboardData.getData('Text');\n          _util2.default.replaceSelectionWithHtml(_content);\n        }\n      }\n    }\n  }, {\n    key: 'insertTable',\n    value: function insertTable(table, pos) {\n      var _this4 = this;\n\n      var currentLength = this._getTableLength(this.data.row);\n      var copiedLength = this._getTableLength(table);\n      var offsetX = pos.x + copiedLength.x - currentLength.x;\n      var offsetY = pos.y + copiedLength.y - currentLength.y;\n      var length = currentLength.x;\n      var row = this.data.row;\n      var targets = [];\n      var rows = [];\n      var data = this.data;\n      var prevRow = (0, _clone2.default)(data.row);\n      while (offsetY > 0) {\n        var newRow = [];\n        for (var i = 0; i < length; i++) {\n          var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n          newRow.push(newcell);\n        }\n        this.insertRow(currentLength.y, newRow);\n        offsetY--;\n      }\n      if (offsetX > 0) {\n        this.data.row.forEach(function (item) {\n          for (var _i = 0; _i < offsetX; _i++) {\n            item.col.push({ type: 'td', colspan: 1, rowspan: 1, value: '' });\n          }\n        });\n      }\n\n      this.update();\n      var destPos = {};\n      var vPos = {\n        x: pos.x,\n        y: pos.y\n      };\n\n      vPos.y += copiedLength.y - 1;\n      vPos.x += copiedLength.x - 1;\n\n      this.data.row.forEach(function (item, i) {\n        if (!item.col) {\n          return false;\n        }\n        item.col.forEach(function (obj, t) {\n          var point = _this4.getCellInfoByIndex(t, i);\n          if (point.x + point.width - 1 === vPos.x && point.y + point.height - 1 === vPos.y) {\n            destPos.x = t;\n            destPos.y = i;\n          }\n        });\n      });\n\n      if (typeof destPos.x === 'undefined') {\n        alert(this.data.message.pasteError1);\n        this.data.row = prevRow;\n        this.update();\n        return;\n      }\n\n      this.selectRange(destPos.y, destPos.x); //todo\n\n      var selectedPoints = this.getSelectedPoints();\n      var largePoint = this.getLargePoint.apply(null, selectedPoints);\n\n      if (largePoint.width !== copiedLength.x || largePoint.height !== copiedLength.y) {\n        alert(this.data.message.pasteError1);\n        this.data.row = prevRow;\n        this.update();\n        return;\n      }\n\n      var bound = { x: 0, y: largePoint.y, width: largePoint.x, height: largePoint.height };\n      var points = this.getAllPoints();\n\n      points.forEach(function (point) {\n        if (_this4.hitTest(bound, point)) {\n          var index = _this4.getCellIndexByPos(point.x, point.y);\n          var cell = _this4.getCellByPos(point.x, point.y);\n          targets.push(index);\n        }\n      });\n\n      targets.forEach(function (item) {\n        var row = item.row;\n        if (item.row < largePoint.y) {\n          return;\n        }\n        if (!rows[row]) {\n          rows[row] = [];\n        }\n        rows[row].push(item);\n      });\n      for (var _i2 = 1, n = rows.length; _i2 < n; _i2++) {\n        if (!rows[_i2]) {\n          continue;\n        }\n        rows[_i2].sort(function (a, b) {\n          if (a.col > b.col) {\n            return 1;\n          }\n          return -1;\n        });\n      }\n      for (var _i3 = largePoint.y, _n = _i3 + largePoint.height; _i3 < _n; _i3++) {\n        if (!rows[_i3]) {\n          rows[_i3] = [];\n          rows[_i3].push({ row: _i3, col: -1 });\n        }\n      }\n      this.removeSelectedCellExcept();\n      var t = 0;\n      rows.forEach(function (row) {\n        var index = row[row.length - 1];\n        if (table[t]) {\n          table[t].col.reverse().forEach(function (cell) {\n            _this4.insertCellAt(index.row, index.col + 1, { type: 'td', colspan: parseInt(cell.colspan), rowspan: parseInt(cell.rowspan), value: cell.value, selected: true });\n          });\n        }\n        t++;\n      });\n      this.update();\n    }\n  }, {\n    key: 'updateResult',\n    value: function updateResult() {\n      var data = this.data;\n      data.row = this.parse(data.tableResult);\n      data.tableClass = this.getTableClass(data.tableResult);\n      data.history.push((0, _clone2.default)(data.row));\n      if (data.inputMode === 'table') {\n        this.update();\n      }\n      if (this.afterEntered) {\n        this.afterEntered();\n      }\n    }\n  }, {\n    key: 'insertColRight',\n    value: function insertColRight(selectedno) {\n      var data = this.data;\n      data.selectedRowNo = parseInt(selectedno);\n      data.showMenu = false;\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var newpoint = { x: parseInt(selectedno), y: 0, width: 1, height: point1.height };\n      var targetPoints = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      targetPoints.forEach(function (point) {\n        var index = self.getCellIndexByPos(point.x, point.y);\n        var cell = self.getCellByPos(point.x, point.y);\n        var newcell = { type: 'td', colspan: 1, rowspan: cell.rowspan, value: '' };\n        if (typeof index.row !== 'undefined' && typeof index.col !== 'undefined') {\n          if (point.width + point.x - newpoint.x > 1) {\n            cell.colspan = parseInt(cell.colspan) + 1;\n            cell.colspan += '';\n          } else {\n            self.insertCellAt(index.row, index.col + 1, newcell);\n          }\n        }\n      });\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'insertColLeft',\n    value: function insertColLeft(selectedno) {\n      var data = this.data;\n      selectedno = parseInt(selectedno);\n      data.selectedRowNo = selectedno + 1;\n      data.showMenu = false;\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      var newpoint = { x: parseInt(selectedno) - 1, y: 0, width: 1, height: point1.height };\n      var targetPoints = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      if (selectedno === 0) {\n        var length = point1.height;\n        for (var i = 0; i < length; i++) {\n          var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n          self.insertCellAt(i, 0, newcell);\n        }\n        data.history.push((0, _clone2.default)(data.row));\n        self.update();\n        return;\n      }\n      targetPoints.forEach(function (point) {\n        var index = self.getCellIndexByPos(point.x, point.y);\n        var cell = self.getCellByPos(point.x, point.y);\n        var newcell = { type: 'td', colspan: 1, rowspan: cell.rowspan, value: '' };\n        if (typeof index.row !== 'undefined' && typeof index.col !== 'undefined') {\n          if (point.width + point.x - newpoint.x > 1) {\n            cell.colspan = parseInt(cell.colspan) + 1;\n            cell.colspan += '';\n          } else {\n            self.insertCellAt(index.row, index.col + 1, newcell);\n          }\n        }\n      });\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'beforeUpdated',\n    value: function beforeUpdated() {\n      this.changeSelectOption();\n      this.markup();\n    }\n  }, {\n    key: 'insertRowBelow',\n    value: function insertRowBelow(selectedno) {\n      var data = this.data;\n      data.showMenu = false;\n      data.selectedColNo = parseInt(selectedno);\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      selectedno = parseInt(selectedno);\n      var newpoint = { x: 0, y: selectedno + 1, width: point1.width, height: 1 };\n      var targetPoints = [];\n      var newRow = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      if (targetPoints.length === 0) {\n        var length = point1.width;\n        for (var i = 0; i < length; i++) {\n          var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n          newRow.push(newcell);\n        }\n        self.insertRow(selectedno + 1, newRow);\n        self.update();\n        return;\n      }\n      targetPoints.forEach(function (point) {\n        var index = self.getCellIndexByPos(point.x, point.y);\n        var cell = self.getCellByPos(point.x, point.y);\n        if (!cell) {\n          return;\n        }\n        var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n        if (typeof index.row !== 'undefined' && typeof index.col !== 'undefined') {\n          if (point.height > 1 && point.y <= selectedno) {\n            cell.rowspan = parseInt(cell.rowspan) + 1;\n            cell.rowspan += '';\n          } else if (index.row === selectedno + 1) {\n            var _length = parseInt(cell.colspan);\n            for (var _i4 = 0; _i4 < _length; _i4++) {\n              newRow.push({ type: 'td', colspan: 1, rowspan: 1, value: '' });\n            }\n          } else {\n            self.insertCellAt(index.row + 1, index.col, newcell);\n          }\n        }\n      });\n      this.insertRow(selectedno + 1, newRow);\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'insertRowAbove',\n    value: function insertRowAbove(selectedno) {\n      var data = this.data;\n      data.showMenu = false;\n      data.selectedColNo = parseInt(selectedno) + 1;\n      var self = this;\n      var points = this.getAllPoints();\n      var point1 = this.getLargePoint.apply(null, points);\n      selectedno = parseInt(selectedno);\n      var newpoint = { x: 0, y: selectedno - 1, width: point1.width, height: 1 };\n      var targetPoints = [];\n      var newRow = [];\n      points.forEach(function (point) {\n        if (self.hitTest(newpoint, point)) {\n          targetPoints.push(point);\n        }\n      });\n      if (selectedno === 0) {\n        var length = point1.width;\n        for (var i = 0; i < length; i++) {\n          var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n          newRow.push(newcell);\n        }\n        self.insertRow(0, newRow);\n        self.update();\n        return;\n      }\n      targetPoints.forEach(function (point) {\n        var index = self.getCellIndexByPos(point.x, point.y);\n        var cell = self.getCellByPos(point.x, point.y);\n        if (!cell) {\n          return;\n        }\n        var newcell = { type: 'td', colspan: 1, rowspan: 1, value: '' };\n        if (typeof index.row !== 'undefined' && typeof index.col !== 'undefined') {\n          if (point.height > 1) {\n            cell.rowspan = parseInt(cell.rowspan) + 1;\n            cell.rowspan += '';\n          } else if (index.row === selectedno - 1) {\n            var _length2 = parseInt(cell.colspan);\n            for (var _i5 = 0; _i5 < _length2; _i5++) {\n              newRow.push({ type: 'td', colspan: 1, rowspan: 1, value: '' });\n            }\n          } else {\n            self.insertCellAt(index.row, index.col, newcell);\n          }\n        }\n      });\n      this.insertRow(selectedno, newRow);\n      data.history.push((0, _clone2.default)(this.data.row));\n      this.update();\n    }\n  }, {\n    key: 'mergeCells',\n    value: function mergeCells() {\n      var data = this.data;\n      var points = this.getSelectedPoints();\n      if (!this.isSelectedCellsRectangle()) {\n        alert(this.data.message.mergeCellError1);\n        return;\n      }\n      if (points.length === 0) {\n        return;\n      }\n      if (!confirm(this.data.message.mergeCellConfirm1)) {\n        return;\n      }\n      var point = this.getLargePoint.apply(null, points);\n      var cell = this.getCellByPos(point.x, point.y);\n      this.removeSelectedCellExcept(cell);\n      cell.colspan = point.width;\n      cell.rowspan = point.height;\n      data.showMenu = false;\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'splitCell',\n    value: function splitCell() {\n      var data = this.data;\n      var selectedPoints = this.getSelectedPoints();\n      var length = selectedPoints.length;\n      if (length === 0) {\n        alert(this.data.message.splitError1);\n        return;\n      } else if (length > 1) {\n        alert(this.data.message.splitError2);\n        return;\n      }\n      var selectedPoint = this.getSelectedPoint();\n      var bound = { x: 0, y: selectedPoint.y, width: selectedPoint.x, height: selectedPoint.height };\n      var points = this.getAllPoints();\n      var currentIndex = this.getCellIndexByPos(selectedPoint.x, selectedPoint.y);\n      var currentCell = this.getCellByPos(selectedPoint.x, selectedPoint.y);\n      var width = parseInt(currentCell.colspan);\n      var height = parseInt(currentCell.rowspan);\n      var currentValue = currentCell.value;\n      var self = this;\n      var targets = [];\n      var cells = [];\n      var rows = [];\n      if (width === 1 && height === 1) {\n        alert(this.data.message.splitError3);\n        return;\n      }\n      points.forEach(function (point) {\n        if (self.hitTest(bound, point)) {\n          var index = self.getCellIndexByPos(point.x, point.y);\n          var cell = self.getCellByPos(point.x, point.y);\n          targets.push(index);\n        }\n      });\n      targets.forEach(function (item) {\n        var row = item.row;\n        if (item.row < currentIndex.row) {\n          return;\n        }\n        if (!rows[row]) {\n          rows[row] = [];\n        }\n        rows[row].push(item);\n      });\n      for (var i = 1, n = rows.length; i < n; i++) {\n        if (!rows[i]) {\n          continue;\n        }\n        rows[i].sort(function (a, b) {\n          if (a.col > b.col) {\n            return 1;\n          }\n          return -1;\n        });\n      }\n      for (var _i6 = selectedPoint.y, _n2 = _i6 + height; _i6 < _n2; _i6++) {\n        if (!rows[_i6]) {\n          rows[_i6] = [];\n          rows[_i6].push({ row: _i6, col: -1 });\n        }\n      }\n      var first = true;\n      rows.forEach(function (row) {\n        var index = row[row.length - 1];\n        for (var _i7 = 0; _i7 < width; _i7++) {\n          var val = '';\n          // \n          if (first === true && _i7 === width - 1) {\n            val = currentValue;\n            first = false;\n          }\n          self.insertCellAt(index.row, index.col + 1, { type: 'td', colspan: 1, rowspan: 1, value: val, selected: true });\n        }\n      });\n      this.removeCell(currentCell);\n      data.showMenu = false;\n      data.history.push((0, _clone2.default)(data.row));\n      data.splited = true;\n      this.update();\n    }\n  }, {\n    key: 'changeCellTypeTo',\n    value: function changeCellTypeTo(type) {\n      var data = this.data;\n      data.row.forEach(function (item, i) {\n        item.col.forEach(function (obj, t) {\n          if (obj.selected) {\n            obj.type = type;\n          }\n        });\n      });\n      data.showMenu = false;\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'align',\n    value: function align(_align) {\n      var data = this.data;\n      data.row.forEach(function (item, i) {\n        item.col.forEach(function (obj, t) {\n          if (obj.selected) {\n            obj.align = _align;\n          }\n        });\n      });\n      data.showMenu = false;\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'getStyleByAlign',\n    value: function getStyleByAlign(val) {\n      var align = this.data.mark.align;\n      if (align.default === val) {\n        return '';\n      }\n      return align[val];\n    }\n  }, {\n    key: 'getAlignByStyle',\n    value: function getAlignByStyle(style) {\n      var align = this.data.mark.align;\n      if (align.right === style) {\n        return 'right';\n      } else if (align.center === style) {\n        return 'center';\n      } else if (align.left === style) {\n        return 'left';\n      }\n    }\n  }, {\n    key: 'isSelectedCellsRectangle',\n    value: function isSelectedCellsRectangle() {\n      var selectedPoints = this.getSelectedPoints();\n      var largePoint = this.getLargePoint.apply(null, selectedPoints);\n      var points = this.getAllPoints();\n      var flag = true;\n      var self = this;\n      points.forEach(function (point) {\n        if (self.hitTest(largePoint, point)) {\n          var cell = self.getCellByPos(point.x, point.y);\n          if (!cell.selected) {\n            flag = false;\n          }\n        }\n      });\n      return flag;\n    }\n  }, {\n    key: 'changeInputMode',\n    value: function changeInputMode(source) {\n      var data = this.data;\n      data.inputMode = source;\n      if (source === 'source') {\n        data.tableResult = this.getTable();\n      } else {\n        data.row = this.parse(data.tableResult);\n        data.tableClass = this.getTableClass(data.tableResult);\n      }\n      this.update();\n    }\n  }, {\n    key: 'changeCellClass',\n    value: function changeCellClass() {\n      var data = this.data;\n      var cellClass = data.cellClass;\n      data.row.forEach(function (item, i) {\n        item.col.forEach(function (obj, t) {\n          if (obj.selected) {\n            obj.cellClass = cellClass;\n          }\n        });\n      });\n      data.history.push((0, _clone2.default)(data.row));\n      this.update();\n    }\n  }, {\n    key: 'changeSelectOption',\n    value: function changeSelectOption() {\n      var cellClass = void 0;\n      var flag = true;\n      var data = this.data;\n      data.row.forEach(function (item) {\n        item.col.forEach(function (obj) {\n          if (obj.selected) {\n            if (!cellClass) {\n              cellClass = obj.cellClass;\n            } else if (cellClass && cellClass !== obj.cellClass) {\n              flag = false;\n            }\n          }\n        });\n      });\n      if (flag) {\n        data.cellClass = cellClass;\n      } else {\n        data.cellClass = '';\n      }\n    }\n  }], [{\n    key: 'isSmartPhone',\n    value: function isSmartPhone() {\n      var agent = navigator.userAgent;\n      if (agent.indexOf('iPhone') > 0 || agent.indexOf('iPad') > 0 || agent.indexOf('ipod') > 0 || agent.indexOf('Android') > 0) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'getBrowser',\n    value: function getBrowser() {\n      var ua = window.navigator.userAgent.toLowerCase();\n      var ver = window.navigator.appVersion.toLowerCase();\n      var name = 'unknown';\n\n      if (ua.indexOf('msie') != -1) {\n        if (ver.indexOf('msie 6.') != -1) {\n          name = 'ie6';\n        } else if (ver.indexOf('msie 7.') != -1) {\n          name = 'ie7';\n        } else if (ver.indexOf('msie 8.') != -1) {\n          name = 'ie8';\n        } else if (ver.indexOf('msie 9.') != -1) {\n          name = 'ie9';\n        } else if (ver.indexOf('msie 10.') != -1) {\n          name = 'ie10';\n        } else {\n          name = 'ie';\n        }\n      } else if (ua.indexOf('trident/7') != -1) {\n        name = 'ie11';\n      } else if (ua.indexOf('chrome') != -1) {\n        name = 'chrome';\n      } else if (ua.indexOf('safari') != -1) {\n        name = 'safari';\n      } else if (ua.indexOf('opera') != -1) {\n        name = 'opera';\n      } else if (ua.indexOf('firefox') != -1) {\n        name = 'firefox';\n      }\n      return name;\n    }\n  }, {\n    key: 'getUniqId',\n    value: function getUniqId() {\n      return (Date.now().toString(36) + Math.random().toString(36).substr(2, 5)).toUpperCase();\n    }\n  }]);\n\n  return aTable;\n}(_aTemplate3.default);\n\nmodule.exports = aTable;","parcelRequire=function(e,r,t,n){var i,o=\"function\"==typeof parcelRequire&&parcelRequire,u=\"function\"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i=\"function\"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&\"string\"==typeof t)return u(t);var c=new Error(\"Cannot find module '\"+t+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=l:\"function\"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({\"pBGv\":[function(require,module,exports) {\n\nvar t,e,n=module.exports={};function r(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t=\"function\"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e=\"function\"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title=\"browser\",n.env={},n.argv=[],n.version=\"\",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error(\"process.binding is not supported\")},n.cwd=function(){return\"/\"},n.chdir=function(t){throw new Error(\"process.chdir is not supported\")},n.umask=function(){return 0};\n},{}],\"Zt7E\":[function(require,module,exports) {\nvar define;\nvar global = arguments[3];\nvar process = require(\"process\");\nvar t,e=arguments[3],r=require(\"process\");!function(e,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=r():\"function\"==typeof t&&t.amd?t(r):e.ES6Promise=r()}(this,function(){\"use strict\";function t(t){return\"function\"==typeof t}var n=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,u=function(t,e){p[o]=t,p[o+1]=e,2===(o+=2)&&(s?s(_):w())};var c=\"undefined\"!=typeof window?window:void 0,a=c||{},f=a.MutationObserver||a.WebKitMutationObserver,l=\"undefined\"==typeof self&&void 0!==r&&\"[object process]\"==={}.toString.call(r),h=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function v(){var t=setTimeout;return function(){return t(_,1)}}var p=new Array(1e3);function _(){for(var t=0;t<o;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}o=0}var d,y,m,b,w=void 0;function g(t,e){var r=this,n=new this.constructor(S);void 0===n[j]&&N(n);var o=r._state;if(o){var i=arguments[o-1];u(function(){return K(o,n,i,r._result)})}else k(r,n,t,e);return n}function A(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(S);return O(e,t),e}l?w=function(){return r.nextTick(_)}:f?(y=0,m=new f(_),b=document.createTextNode(\"\"),m.observe(b,{characterData:!0}),w=function(){b.data=y=++y%2}):h?((d=new MessageChannel).port1.onmessage=_,w=function(){return d.port2.postMessage(0)}):w=void 0===c&&\"function\"==typeof require?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(_)}:v()}catch(e){return v()}}():v();var j=Math.random().toString(36).substring(2);function S(){}var E=void 0,T=1,M=2,P={error:null};function x(t){try{return t.then}catch(e){return P.error=e,P}}function C(e,r,n){r.constructor===e.constructor&&n===g&&r.constructor.resolve===A?function(t,e){e._state===T?F(t,e._result):e._state===M?Y(t,e._result):k(e,void 0,function(e){return O(t,e)},function(e){return Y(t,e)})}(e,r):n===P?(Y(e,P.error),P.error=null):void 0===n?F(e,r):t(n)?function(t,e,r){u(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(o){return o}}(r,e,function(r){n||(n=!0,e!==r?O(t,r):F(t,r))},function(e){n||(n=!0,Y(t,e))},t._label);!n&&o&&(n=!0,Y(t,o))},t)}(e,r,n):F(e,r)}function O(t,e){var r,n;t===e?Y(t,new TypeError(\"You cannot resolve a promise with itself\")):(n=typeof(r=e),null===r||\"object\"!==n&&\"function\"!==n?F(t,e):C(t,e,x(e)))}function q(t){t._onerror&&t._onerror(t._result),D(t)}function F(t,e){t._state===E&&(t._result=e,t._state=T,0!==t._subscribers.length&&u(D,t))}function Y(t,e){t._state===E&&(t._state=M,t._result=e,u(q,t))}function k(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+T]=r,o[i+M]=n,0===i&&t._state&&u(D,t)}function D(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?K(r,n,o,i):o(i);t._subscribers.length=0}}function K(e,r,n,o){var i=t(n),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(r){return P.error=r,P}}(n,o))===P?(a=!0,u=s.error,s.error=null):c=!0,r===s)return void Y(r,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=o,c=!0;r._state!==E||(i&&c?O(r,s):a?Y(r,u):e===T?F(r,s):e===M&&Y(r,s))}var L=0;function N(t){t[j]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(S),this.promise[j]||N(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&F(this.promise,this._result))):Y(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===E&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===A){var o=x(t);if(o===g&&t._state!==E)this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof o)this._remaining--,this._result[e]=t;else if(r===W){var i=new r(S);C(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===E&&(this._remaining--,t===M?Y(n,r):this._result[e]=r),0===this._remaining&&F(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;k(t,void 0,function(t){return r._settledAt(T,e,t)},function(t){return r._settledAt(M,e,t)})},t}();var W=function(){function e(t){this[j]=L++,this._result=this._state=void 0,this._subscribers=[],S!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){O(t,e)},function(e){Y(t,e)})}catch(r){Y(t,r)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return W.prototype.then=g,W.all=function(t){return new U(this,t).promise},W.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},W.resolve=A,W.reject=function(t){var e=new this(S);return Y(e,t),e},W._setScheduler=function(t){s=t},W._setAsap=function(t){u=t},W._asap=u,W.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(o){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(o){}if(\"[object Promise]\"===n&&!r.cast)return}t.Promise=W},W.Promise=W,W});\n},{\"process\":\"pBGv\"}],\"HrMX\":[function(require,module,exports) {\nfunction t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(e)}function e(t){return o(t)||r(t)||n()}function n(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function r(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function i(e,n){return!n||\"object\"!==t(n)&&\"function\"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function c(t,e,n){return(c=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=a(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}var b=function(){function t(){p(this,t),this._id=0,this._listeners={}}return h(t,[{key:\"dispatch\",value:function(){for(var t in this._listeners){var e;(e=this._listeners)[t].apply(e,arguments)}}},{key:\"attach\",value:function(t){var e=this;if(\"function\"!=typeof t)throw new Error(\"listener function expected\");var n=this._id++;return this._listeners[n]=t,function(){return delete e._listeners[n]}}}]),t}(),v=\"__private__memoized__arguments__\",_=function(t){function n(){var t;p(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!r.length)throw new Error(\"Initial value to be memoized expected\");return(t=i(this,f(n).call(this)))[v]=r,t}return l(n,b),h(n,[{key:\"dispatch\",value:function(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];this[v]=r,(t=c(f(n.prototype),\"dispatch\",this)).call.apply(t,[this].concat(r))}},{key:\"attach\",value:function(t){var r=c(f(n.prototype),\"attach\",this).call(this,t);return t.apply(void 0,e(this[v])),r}}]),n}();module.exports={Signal:b,MemoizedSignal:_};\n},{}],\"sCMk\":[function(require,module,exports) {\nfunction e(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}function t(e){return i(e)||s(e)||a()}function a(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function s(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}var o=require(\"es6-promise\"),l=o.Promise,u=require(\"./signal\"),c=u.Signal;function d(e,n){e.addEventListener(\"message\",function r(a){var s=a.data;\"connect\"===s.method&&(e.removeEventListener(\"message\",r),n.apply(void 0,t(s.params)))})}module.exports=function(e,n){d(e,function(r,t){var a=new f(r.id,e);n(a,r,t)})};var f=function(){function n(r,t){var a=this;e(this,n),this._messageHandlers={},this._responseHandlers={},this._send=h(r,t.parent),t.addEventListener(\"message\",function(e){a._handleMessage(e.data)})}return r(n,[{key:\"call\",value:function(e){for(var n=this,r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];var s=this._send(e,t);return new l(function(e,r){n._responseHandlers[s]={resolve:e,reject:r}})}},{key:\"send\",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];this._send(e,r)}},{key:\"addHandler\",value:function(e,n){return e in this._messageHandlers||(this._messageHandlers[e]=new c),this._messageHandlers[e].attach(n)}},{key:\"_handleMessage\",value:function(e){if(e.method){var n=e.method,r=e.params,a=this._messageHandlers[n];a&&a.dispatch.apply(a,t(r))}else{var s=e.id,i=this._responseHandlers[s];if(!i)return;\"result\"in e?i.resolve(e.result):\"error\"in e&&i.reject(e.error),delete this._responseHandlers[s]}}}]),n}();function h(e,n){var r=0;return function(t,a){var s=r++;return n.postMessage({source:e,id:s,method:t,params:a},\"*\"),s}}\n},{\"es6-promise\":\"Zt7E\",\"./signal\":\"HrMX\"}],\"Mq5l\":[function(require,module,exports) {\nvar e=require(\"es6-promise\"),n=e.Promise,r=require(\"./channel\");function t(){var e={};return e.promise=new n(function(n){e.resolve=n}),e}module.exports=function(e,n){var o=t(),i=t();return i.promise.then(function(n){var r=e.document;r.addEventListener(\"focus\",function(){return n.send(\"setActive\",!0)},!0),r.addEventListener(\"blur\",function(){return n.send(\"setActive\",!1)},!0)}),r(e,function(r,t,s){i.resolve(r);var u=n(r,t,e);s.forEach(function(e){r._handleMessage(e)}),o.resolve(u)}),function(e){o.promise.then(e)}};\n},{\"es6-promise\":\"Zt7E\",\"./channel\":\"sCMk\"}],\"GnXy\":[function(require,module,exports) {\nfunction e(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}function a(e,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&a(e.prototype,n),i&&a(e,i),e}var i=require(\"./signal\"),l=i.MemoizedSignal,t=[\"id\",\"locale\",\"type\",\"required\",\"validations\",\"items\"];module.exports=function(){function a(n,i){var r=this;e(this,a),t.forEach(function(e){void 0!==i[e]&&(r[e]=i[e])}),this._value=i.value,this._valueSignal=new l(this._value),this._isDisabledSignal=new l(void 0),this._schemaErrorsChangedSignal=new l(void 0),this._channel=n,n.addHandler(\"valueChanged\",function(e,a,n){e!==r.id||a&&a!==r.locale||(r._value=n,r._valueSignal.dispatch(n))}),n.addHandler(\"isDisabledChanged\",function(e){r._isDisabledSignal.dispatch(e)}),n.addHandler(\"schemaErrorsChanged\",function(e){r._schemaErrorsChangedSignal.dispatch(e)})}return n(a,[{key:\"getValue\",value:function(){return this._value}},{key:\"setValue\",value:function(e){return this._value=e,this._valueSignal.dispatch(e),this._channel.call(\"setValue\",this.id,this.locale,e)}},{key:\"removeValue\",value:function(){return this._value=void 0,this._channel.call(\"removeValue\",this.id,this.locale)}},{key:\"setInvalid\",value:function(e){return this._channel.call(\"setInvalid\",e,this.locale)}},{key:\"onValueChanged\",value:function(e){return this._valueSignal.attach(e)}},{key:\"onIsDisabledChanged\",value:function(e){return this._isDisabledSignal.attach(e)}},{key:\"onSchemaErrorsChanged\",value:function(e){return this._schemaErrorsChangedSignal.attach(e)}}]),a}();\n},{\"./signal\":\"HrMX\"}],\"daBI\":[function(require,module,exports) {\nfunction e(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{},l=Object.keys(o);\"function\"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),l.forEach(function(n){t(e,n,o[n])})}return e}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var r=require(\"./field-locale\"),i=[\"id\",\"locales\",\"type\",\"required\",\"validations\",\"items\"];function a(e,t){if(!e._fieldLocales[t])throw new Error('Unknown locale \"'.concat(t,'\" for field \"').concat(e.id,'\"'))}module.exports=function(){function o(l,u,c){var f=this;n(this,o),i.forEach(function(e){void 0!==u[e]&&(f[e]=u[e])}),this._defaultLocale=c,this._fieldLocales=u.locales.reduce(function(n,o){return e({},n,t({},o,new r(l,{id:u.id,locale:o,value:u.values[o]})))},{}),a(this,c)}return l(o,[{key:\"getValue\",value:function(e){return this._getFieldLocale(e).getValue()}},{key:\"setValue\",value:function(e,t){return this._getFieldLocale(t).setValue(e)}},{key:\"removeValue\",value:function(e){return this.setValue(void 0,e)}},{key:\"onValueChanged\",value:function(e,t){return t||(t=e,e=void 0),this._getFieldLocale(e).onValueChanged(t)}},{key:\"onIsDisabledChanged\",value:function(e,t){return t||(t=e,e=void 0),this._getFieldLocale(e).onIsDisabledChanged(t)}},{key:\"_getFieldLocale\",value:function(e){return a(this,e=e||this._defaultLocale),this._fieldLocales[e]}}]),o}();\n},{\"./field-locale\":\"GnXy\"}],\"XV20\":[function(require,module,exports) {\nmodule.exports=function(e,t){var n=e.document,i=e.MutationObserver,r=function(){c.updateHeight()},u=new i(r),o=null,s=!1,c={startAutoResizer:function(){if(c.updateHeight(),s)return;s=!0,u.observe(n.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),e.addEventListener(\"resize\",r)},stopAutoResizer:function(){if(!s)return;s=!1,u.disconnect(),e.removeEventListener(\"resize\",r)},updateHeight:function(e){null==e&&(e=Math.ceil(n.documentElement.getBoundingClientRect().height));e!==o&&(t.send(\"setHeight\",e),o=e)}};return c};\n},{}],\"97BZ\":[function(require,module,exports) {\nvar n=require(\"./signal\"),e=n.MemoizedSignal;module.exports=function(n,r,t,i){var u=r.sys,a=new e(u);return n.addHandler(\"sysChanged\",function(n){u=n,a.dispatch(u)}),{getSys:function(){return u},onSysChanged:function(n){return a.attach(n)},fields:t.reduce(function(n,e){return n[e.id]=i(e),n},{})}};\n},{\"./signal\":\"HrMX\"}],\"iabO\":[function(require,module,exports) {\nvar e=[\"getContentType\",\"getEntry\",\"getEntrySnapshots\",\"getAsset\",\"getEditorInterface\",\"getPublishedEntries\",\"getPublishedAssets\",\"getContentTypes\",\"getEntries\",\"getAssets\",\"createContentType\",\"createEntry\",\"createAsset\",\"updateContentType\",\"updateEntry\",\"updateAsset\",\"deleteContentType\",\"deleteEntry\",\"deleteAsset\",\"publishEntry\",\"publishAsset\",\"unpublishEntry\",\"unpublishAsset\",\"archiveEntry\",\"archiveAsset\",\"unarchiveEntry\",\"unarchiveAsset\",\"createUpload\",\"processAsset\",\"waitUntilAssetProcessed\",\"getUsers\"];module.exports=function(t){var s={};return e.forEach(function(e){s[e]=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return t.call(\"callSpaceMethod\",e,n)}}),s};\n},{}],\"6GEt\":[function(require,module,exports) {\nfunction n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(e)}function e(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),r.forEach(function(e){t(n,e,o[e])})}return n}function t(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}module.exports=function(t,o){return{openAlert:r.bind(null,\"alert\"),openConfirm:r.bind(null,\"confirm\"),openPrompt:r.bind(null,\"prompt\"),openExtension:function(n){return t.call(\"openDialog\",\"extension\",e({id:o},i(n)))}.bind(null),selectSingleEntry:l.bind(null,\"Entry\",!1),selectSingleAsset:l.bind(null,\"Asset\",!1),selectMultipleEntries:l.bind(null,\"Entry\",!0),selectMultipleAssets:l.bind(null,\"Asset\",!0)};function r(n,e){return t.call(\"openDialog\",n,i(e))}function l(n,e,o){return(o=i(o)).entityType=n,o.multiple=e,t.call(\"openDialog\",\"entitySelector\",o)}function i(e){return\"object\"===n(e)&&null!==e&&!Array.isArray(e)?e:{}}};\n},{}],\"fqJo\":[function(require,module,exports) {\nvar e=require(\"./signal\"),n=e.MemoizedSignal;module.exports=function(e,a){var d=new n(void 0),t=new n(void 0);return e.addHandler(\"localeSettingsChanged\",function(e){d.dispatch(e)}),e.addHandler(\"showDisabledFieldsChanged\",function(e){t.dispatch(e)}),{editorInterface:a,onLocaleSettingsChanged:function(e){return d.attach(e)},onShowDisabledFieldsChanged:function(e){return t.attach(e)}}};\n},{\"./signal\":\"HrMX\"}],\"Y2Q9\":[function(require,module,exports) {\nfunction n(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),r.forEach(function(e){t(n,e,o[e])})}return n}function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}module.exports=function(t,e){return{openEntry:function(e,o){return t.call(\"navigateToContentEntity\",n({},o,{entityType:\"Entry\",id:e}))},openNewEntry:function(e,o){return t.call(\"navigateToContentEntity\",n({},o,{entityType:\"Entry\",id:null,contentTypeId:e}))},openAsset:function(e,o){return t.call(\"navigateToContentEntity\",n({},o,{entityType:\"Asset\",id:e}))},openNewAsset:function(e){return t.call(\"navigateToContentEntity\",n({},e,{entityType:\"Asset\",id:null}))},openPageExtension:function(o){return t.call(\"navigateToPageExtension\",n({id:e},o))}}};\n},{}],\"CHnp\":[function(require,module,exports) {\nmodule.exports={LOCATION_ENTRY_FIELD:\"entry-field\",LOCATION_ENTRY_FIELD_SIDEBAR:\"entry-field-sidebar\",LOCATION_ENTRY_SIDEBAR:\"entry-sidebar\",LOCATION_DIALOG:\"dialog\",LOCATION_ENTRY_EDITOR:\"entry-editor\",LOCATION_PAGE:\"page\"};\n},{}],\"LVu9\":[function(require,module,exports) {\nvar e;function r(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},o=Object.keys(t);\"function\"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(r){n(e,r,t[r])})}return e}function n(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var t=require(\"./field\"),o=require(\"./field-locale\"),i=require(\"./window\"),u=require(\"./entry\"),a=require(\"./space\"),c=require(\"./dialogs\"),l=require(\"./editor\"),s=require(\"./navigator\"),f=require(\"./locations\"),O=[y,T,b,p,I],d=(n(e={},f.LOCATION_ENTRY_FIELD,O),n(e,f.LOCATION_ENTRY_FIELD_SIDEBAR,O),n(e,f.LOCATION_ENTRY_SIDEBAR,[y,T,p,I]),n(e,f.LOCATION_ENTRY_EDITOR,[y,T,p]),n(e,f.LOCATION_DIALOG,[y,v,I]),n(e,f.LOCATION_PAGE,[y]),e);function y(e,r){var n=r.user,t=r.parameters,o=r.locales,i=r.ids;return{location:{is:function(e){return(r.location||f.LOCATION_ENTRY_FIELD)===e}},user:n,parameters:t,locales:{available:o.available,default:o.default,names:o.names},space:a(e),dialogs:c(e,i.extension),navigator:s(e,i.extension),notifier:{success:function(r){return e.send(\"notify\",{type:\"success\",message:r})},error:function(r){return e.send(\"notify\",{type:\"error\",message:r})}},ids:i}}function I(e,r,n){return{window:i(n,e)}}function p(e,r){var n=r.editorInterface;return{editor:l(e,n)}}function T(e,r){var n=r.locales,o=r.contentType,i=r.entry,a=r.fieldInfo;return{contentType:o,entry:u(e,i,a,function(r){return new t(e,r,n.default)})}}function b(e,r){var n=r.field;return{field:new o(e,n)}}function v(e){return{close:function(r){return e.send(\"closeDialog\",r)}}}module.exports=function(e,n,t){return(d[n.location]||O).reduce(function(o,i){return r({},o,i(e,n,t))},{})};\n},{\"./field\":\"daBI\",\"./field-locale\":\"GnXy\",\"./window\":\"XV20\",\"./entry\":\"97BZ\",\"./space\":\"iabO\",\"./dialogs\":\"6GEt\",\"./editor\":\"fqJo\",\"./navigator\":\"Y2Q9\",\"./locations\":\"CHnp\"}],\"Focm\":[function(require,module,exports) {\nvar i=require(\"./initialize\"),e=require(\"./api\"),r=require(\"./locations\");module.exports={init:i(window,e),locations:r};\n},{\"./initialize\":\"Mq5l\",\"./api\":\"LVu9\",\"./locations\":\"CHnp\"}]},{},[\"Focm\"], \"contentfulExtension\")","import aTable from 'a-table'\nimport { init, FieldExtensionSDK } from 'contentful-ui-extensions-sdk'\n\n/**\n * HACK: sandbox iframe  window.alert \n */\nwindow.alert = console.log\nwindow.confirm = (message: string) => {\n  console.log(message)\n  return true\n}\n\nconst config = {\n  lang: 'ja',\n  selector: {\n    option: [{ label: '.hidden ', value: 'hidden' }]\n  }\n}\n\nclass Table {\n  private table = new aTable(this.el, config)\n\n  constructor(private readonly el: HTMLElement, private readonly sdk: FieldExtensionSDK) {\n    this.table.afterEntered = this.onChange.bind(this)\n    this.table.afterRendered = this.onChange.bind(this)\n    this.onChange()\n  }\n\n  private onChange() {\n    if (!this.sdk) {\n      return\n    }\n\n    this.sdk.field.setValue(this.table.getTable())\n  }\n}\n\ninit(_sdk => {\n  const sdk = _sdk as FieldExtensionSDK\n  sdk.window.startAutoResizer()\n\n  const el = document.getElementById('root')\n  if (!el) {\n    return\n  }\n\n  const html = parseInitialValue(sdk)\n  if (html) {\n    el.innerHTML = html\n  }\n\n  new Table(el, sdk)\n})\n\nconst defaultTemplate = `\n<tr>\n  <th>head1</th>\n  <th>head2</th>\n</tr>\n<tr>\n  <td>body1</td>\n  <td>body2</td>\n</tr>\n`\n\nconst parseInitialValue = (sdk: FieldExtensionSDK) => {\n  const raw = sdk.field.getValue()\n  const domparser = new DOMParser()\n  const html = domparser.parseFromString(raw, 'text/html')\n  const table = html.querySelector('table')\n\n  return table ? table.innerHTML : defaultTemplate\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}